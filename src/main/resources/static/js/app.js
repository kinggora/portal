(function(){"use strict";var e={5388:function(e,t,a){var l=a(9242),o=a(3396),n=a(7718),s=a(3140);function r(e,t,a,l,r,i){const u=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(n.q,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s.O,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u)])),_:1})])),_:1})}var i={name:"App",components:{}},u=a(89);const c=(0,u.Z)(i,[["render",r]]);var d=c,m=a(2483);const p={class:"body"};function g(e,t,a,l,n,s){const r=(0,o.up)("BoardsToolbar"),i=(0,o.up)("router-view"),u=(0,o.up)("BoardsFooter");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(r),(0,o._)("div",p,[((0,o.wg)(),(0,o.j4)(i,{key:l.route.fullPath}))]),(0,o.Wm)(u)])}var h=a(7139),f=a(6372),v=a(7471),w=a(5030);const y={key:0},k={key:1};function b(e,t,a,l,n,s){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(v.i,{color:"indigo"},{default:(0,o.w5)((()=>[(0,o.Wm)(w.q,{onClick:l.moveToHome},{default:(0,o.w5)((()=>[(0,o.Uk)("Portal")])),_:1},8,["onClick"]),l.isAuthenticated?((0,o.wg)(),(0,o.iD)("div",y,[(0,o.Uk)((0,h.zw)(l.name)+" 님 ",1),l.isAuthenticated?((0,o.wg)(),(0,o.j4)(f.T,{key:0,onClick:l.moveToMyPage},{default:(0,o.w5)((()=>[(0,o.Uk)("MYPAGE")])),_:1},8,["onClick"])):(0,o.kq)("",!0),l.isAuthenticated?((0,o.wg)(),(0,o.j4)(f.T,{key:1,onClick:l.logout},{default:(0,o.w5)((()=>[(0,o.Uk)("LOGOUT")])),_:1},8,["onClick"])):(0,o.kq)("",!0)])):((0,o.wg)(),(0,o.iD)("div",k,[l.isAuthenticated?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(f.T,{key:0,onClick:l.moveToLogin},{default:(0,o.w5)((()=>[(0,o.Uk)("LOGIN")])),_:1},8,["onClick"])),l.isAuthenticated?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(f.T,{key:1,onClick:l.moveToSignUp},{default:(0,o.w5)((()=>[(0,o.Uk)("SIGNUP")])),_:1},8,["onClick"]))]))])),_:1})])}a(7658);var _=a(65),D={name:"BoardsToolbar",setup(){const e=(0,_.oR)(),t=(0,o.Fl)((()=>e.state.authStore.isAuthenticated)),a=(0,o.Fl)((()=>e.getters["authStore/getMember"]?.name)),l=()=>{e.dispatch("authStore/logout"),Sn.go()},n=()=>{Sn.push("/")},s=()=>{Sn.push("/login")},r=()=>{Sn.push("/signup")},i=()=>{Sn.push("/mypage")};return{isAuthenticated:t,name:a,logout:l,moveToHome:n,moveToLogin:s,moveToSignUp:r,moveToMyPage:i}}};const C=(0,u.Z)(D,[["render",b]]);var T=C;const W=e=>((0,o.dD)("data-v-9fb94c70"),e=e(),(0,o.Cn)(),e),I=W((()=>(0,o._)("p",null,"Portal 2023 @ github.com/kinggora/portal",-1))),x=[I];function P(e,t,a,l,n,s){return(0,o.wg)(),(0,o.iD)("div",null,x)}var S={name:"BoardsFooter"};const U=(0,u.Z)(S,[["render",P],["__scopeId","data-v-9fb94c70"]]);var F=U,B={name:"NoMenuLayout",components:{BoardsFooter:F,BoardsToolbar:T},setup(){let e=(0,m.yj)();return{route:e}}};const q=(0,u.Z)(B,[["render",g],["__scopeId","data-v-6204c1a8"]]);var L=q,M=a(1489),H=a(6572),j=a(6422),z=a(6824),V=a(165);const A=e=>((0,o.dD)("data-v-bb187938"),e=e(),(0,o.Cn)(),e),Z={class:"container"},$=A((()=>(0,o._)("h2",null,"회원 등록",-1)));function E(e,t,a,n,s,r){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",Z,[(0,o.Wm)(M._,{class:"card-area",width:"600",color:"indigo",variant:"tonal"},{text:(0,o.w5)((()=>[(0,o.Wm)(z.o,{class:"mb-5",align:"center",justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(H.E,{class:"pa-3"},{default:(0,o.w5)((()=>[$])),_:1})])),_:1}),(0,o.Wm)(j.O,{onSubmit:t[3]||(t[3]=(0,l.iM)((()=>{}),["prevent"]))},{default:(0,o.w5)((()=>[(0,o.Wm)(z.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V.h,{label:"아이디",modelValue:n.input.username,"onUpdate:modelValue":t[0]||(t[0]=e=>n.input.username=e),variant:"outlined",rules:n.rules.username},null,8,["modelValue","rules"])])),_:1}),(0,o.Wm)(z.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V.h,{label:"비밀번호",type:"password",modelValue:n.input.password,"onUpdate:modelValue":t[1]||(t[1]=e=>n.input.password=e),variant:"outlined",rules:n.rules.password,autoComplete:"off"},null,8,["modelValue","rules"])])),_:1}),(0,o.Wm)(z.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V.h,{label:"닉네임",modelValue:n.input.name,"onUpdate:modelValue":t[2]||(t[2]=e=>n.input.name=e),variant:"outlined",rules:n.rules.name},null,8,["modelValue","rules"])])),_:1}),(0,o.Wm)(z.o,{class:"d-flex"},{default:(0,o.w5)((()=>[(0,o.Wm)(f.T,{class:"flex-grow-1",variant:"flat",height:"60",color:"indigo-darken-4",type:"submit",loading:n.isLoading,onClick:n.clickSubmitBtn},{default:(0,o.w5)((()=>[(0,o.Uk)("등록 ")])),_:1},8,["loading","onClick"])])),_:1})])),_:1})])),_:1})])])}var N=a(4870),O={name:"SignUp",components:{},setup(){const e=(0,o.f3)("axios");let t=(0,N.iH)({username:"",password:"",name:""});const a={username:{regex:/^[a-z]{1}[a-z0-9]{5,9}$/,hint:"영문 소문자/숫자 6-10자리로 입력해주세요."},password:{regex:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d~!@#$%^&*()+|=]{8,20}$/,hint:"영문/숫자/특수문자 8-20자리로 입력해주세요."},name:{regex:/^[0-9a-zA-Zㄱ-ㅎ가-힣]{2,10}$/,hint:"한글/영문/숫자 2-10자리로 입력해주세요."}},l={username:[e=>!!e||"아이디를 입력해주세요.",e=>!/^\d.*/.test(e)||"아이디는 숫자로 시작할 수 없습니다.",e=>a.username.regex.test(e)||a.username.hint],password:[e=>!!e||"비밀번호를 입력해주세요.",e=>a.password.regex.test(e)||a.password.hint],name:[e=>!!e||"닉네임을 입력해주세요.",e=>a.name.regex.test(e)||a.name.hint]},n=()=>{for(let e of l.username)if(!0!==e(t.value.username))return alert(e(t.value.username)),!1;for(let e of l.password)if(!0!==e(t.value.password))return alert(e(t.value.password)),!1;for(let e of l.name)if(!0!==e(t.value.name))return alert(e(t.value.name)),!1;return!0},s=()=>{n()&&r()},r=()=>{u();const a=new FormData;a.set("username",t.value.username),a.set("password",t.value.password),a.set("name",t.value.name),e.post("/members",a).then((()=>{alert("회원 등록을 성공했습니다. 로그인 페이지로 이동합니다."),l()})).catch((e=>{e.response.data&&e.response.data.message?alert(e.response.data.message):alert("회원 등록을 실패했습니다. 잠시 후 다시 시도해주세요.")})).finally((()=>{c()}));const l=()=>{Sn.push({path:"/login"})}};let i=(0,N.iH)(!1);const u=()=>{i.value=!0},c=()=>{i.value=!1};return{input:t,rules:l,isLoading:i,clickSubmitBtn:s}}};const R=(0,u.Z)(O,[["render",E],["__scopeId","data-v-bb187938"]]);var Y=R;const G={class:"toolbar"},K={class:"body"},Q={class:"menu"},J={class:"content"};function X(e,t,a,l,n,s){const r=(0,o.up)("BoardsToolbar"),i=(0,o.up)("BoardsMenu"),u=(0,o.up)("router-view"),c=(0,o.up)("BoardsFooter");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",G,[(0,o.Wm)(r)]),(0,o._)("div",K,[(0,o._)("div",Q,[(0,o.Wm)(i,{menus:l.boardInfos},null,8,["menus"])]),(0,o._)("div",J,[((0,o.wg)(),(0,o.j4)(u,{key:l.route.fullPath}))])]),(0,o.Wm)(c)])}var ee=a(3289),te=a(4454),ae=a(2329),le=a(8777),oe=a(9657);function ne(e,t,a,l,n,r){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(M._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(te.s,{class:"v-layout--full-height"},{default:(0,o.w5)((()=>[(0,o.Wm)(oe.V,{floating:"",permanent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(ae.i,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.menus,((e,t)=>((0,o.wg)(),(0,o.j4)(le.l,{active:e.id===l.selected,key:t,value:e.id,title:e.subject,onClick:t=>l.moveToMenu(e.id,e.boardType)},{prepend:(0,o.w5)((()=>[(0,o.Wm)(ee.t,{icon:e.icon},null,8,["icon"])])),_:2},1032,["active","value","title","onClick"])))),128))])),_:1})])),_:1}),(0,o.Wm)(s.O,{style:{height:"500px"}})])),_:1})])),_:1})])}var se={name:"BoardsMenu",props:{menus:{type:Array,required:!0,default:()=>[]}},setup(){const e=(0,m.yj)();let t=(0,o.Fl)((()=>e.query.boardId?parseInt(e.query.boardId):null));const a=(e,t)=>{Sn.push({path:"/portal",query:{boardId:e,boardType:t}})};return{selected:t,moveToMenu:a}}};const re=(0,u.Z)(se,[["render",ne]]);var ie=re,ue=a(8541);const{cookies:ce}=(0,ue.fP)(),de="accessToken",me="refreshToken";function pe(e,t){ce.set(e,t)}function ge(e){ce.remove(e)}function he(e){pe(de,e)}function fe(e){pe(me,e)}function ve(){return ce.get(de)}function we(){return ce.get(me)}function ye(){ge(de)}function ke(){ge(me)}var be=a(4161);const _e=()=>{const e=be.Z.create({baseURL:"http://localhost:8080"});return De(e)},De=e=>(e.interceptors.request.use((e=>{const t=ve();return e.headers&&t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>(console.log(e),Promise.reject(e)))),e.interceptors.response.use((function(e){return e}),(function(e){if(e.response&&e.response.status)switch(console.log(e.response),e.response.status){case 401:xe.dispatch("authStore/logout").then((()=>{}));break}return Promise.reject(e)})),e);var Ce=_e();const Te={namespaced:!0,state:{isAuthenticated:!!ve(),member:{},accessToken:ve(),refreshToken:we()},getters:{isAuthenticated(e){return e.isAuthenticated},getAccessToken(e){return e.accessToken},getRefreshToken(e){return e.refreshToken},getMember(e){return e.member},isAdmin(e){if(e.member&&e.member.roles)for(let t of e.member.roles)if("ADMIN"===t)return!0;return!1}},mutations:{setMember(e,t){e.member.id=t.id,e.member.username=t.username,e.member.name=t.name,e.member.roles=t.roles},setAuthenticated(e,t){e.isAuthenticated=t},resetState(e){e.isAuthenticated=!1,e.member={},e.accessToken=null,e.refreshToken=null}},actions:{login({dispatch:e,commit:t},a){he(a.accessToken),fe(a.refreshToken),t("setAuthenticated",!0),e("fetchMember")},logout({commit:e}){e("resetState"),ye(),ke()},fetchMember({commit:e}){Ce.get("/members").then((t=>{console.log(t.data),e("setMember",t.data.data)})).catch((()=>{e("resetState")}))}}},We={namespaced:!0,state:{boardInfo:null,boardInfos:null},getters:{getBoardInfo(e){return e.boardInfo},getBoardInfos(e){return e.boardInfos}},mutations:{setBoardInfo(e,t){console.log("setBoardInfo",t),e.boardInfo=t.data},setBoardInfos(e,t){console.log("setBoardInfos",t),e.boardInfos=t.data}},actions:{fetchBoardInfo({commit:e},t){return Ce.get(`/boards/${t}`).then((t=>{e("setBoardInfo",t.data)})).catch((e=>{switch(e.response.status){case 404:Sn.push("/").catch((()=>{}));break}}))},fetchBoardInfos({commit:e}){return Ce.get("/boards").then((t=>{e("setBoardInfos",t.data)})).catch((e=>{console.log(e)}))}}},Ie={namespaced:!0,state:{post:null},getters:{getPost(e){return e.post}},mutations:{setPost(e,t){e.post=t.data}},actions:{fetchPost({commit:e},t){return Ce.get(`/posts/${t}`).then((t=>{e("setPost",t.data)}))}}};var xe=(0,_.MT)({state:{},getters:{},mutations:{},actions:{},modules:{authStore:Te,boardInfoStore:We,postStore:Ie}}),Pe={name:"DefaultLayout",components:{BoardsMenu:ie,BoardsToolbar:T,BoardsFooter:F},setup(){const e=(0,m.yj)();let t=(0,N.iH)([]);return(0,o.bv)((()=>{t.value=xe.getters["boardInfoStore/getBoardInfos"]})),{route:e,boardInfos:t}}};const Se=(0,u.Z)(Pe,[["render",X],["__scopeId","data-v-d2c8abe0"]]);var Ue=Se,Fe=a(1222),Be=a(3369),qe=a(8521),Le=a(7302),Me=a(787),He=a(4842);const je={class:"form-area"};function ze(e,t,a,l,n,s){const r=(0,o.up)("TitleHeader"),i=(0,o.up)("ImageFileInput"),u=(0,o.up)("AttachFileInput");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(Be.K,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{title:l.boardInfo.subject},null,8,["title"]),(0,o._)("div",je,[(0,o.Wm)(j.O,null,{default:(0,o.w5)((()=>[(0,o.Wm)(z.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(qe.D,{cols:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(Me.rL,{label:"카테고리 선택",items:l.categories,"item-title":"name","item-value":"id",modelValue:l.input.categoryId,"onUpdate:modelValue":t[0]||(t[0]=e=>l.input.categoryId=e),rules:l.rules.categoryId},null,8,["items","modelValue","rules"])])),_:1}),l.boardInfo.allowSecret?((0,o.wg)(),(0,o.j4)(qe.D,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(Fe.x,{modelValue:l.input.secret,"onUpdate:modelValue":t[1]||(t[1]=e=>l.input.secret=e),label:"비밀글"},null,8,["modelValue"])])),_:1})):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(z.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(qe.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(Le.J,{class:"ms-2 mb-2"},{default:(0,o.w5)((()=>[(0,o.Uk)("제목")])),_:1}),(0,o.Wm)(V.h,{rules:l.rules.title,modelValue:l.input.title,"onUpdate:modelValue":t[2]||(t[2]=e=>l.input.title=e)},null,8,["rules","modelValue"])])),_:1})])),_:1}),(0,o.Wm)(z.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(qe.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(Le.J,{class:"ms-2 mb-2"},{default:(0,o.w5)((()=>[(0,o.Uk)("내용")])),_:1}),(0,o.Wm)(He.z,{rows:"10","row-height":"25",modelValue:l.input.content,"onUpdate:modelValue":t[3]||(t[3]=e=>l.input.content=e),rules:l.rules.content,spellcheck:"false"},null,8,["modelValue","rules"])])),_:1})])),_:1}),(0,o.Wm)(z.o,{class:"mb-6"},{default:(0,o.w5)((()=>[(0,o.Wm)(qe.D,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Le.J,{class:"ms-2 mb-2"},{default:(0,o.w5)((()=>[(0,o.Uk)("사진 첨부")])),_:1}),(0,o.Wm)(i,{existingFiles:l.contentFiles,onChange:l.setInputImages,onDelete:l.addFileToDelete},null,8,["existingFiles","onChange","onDelete"])])),_:1})])),_:1}),(0,o.Wm)(z.o,{class:"mb-6"},{default:(0,o.w5)((()=>[(0,o.Wm)(qe.D,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Le.J,{class:"ms-2 mb-2"},{default:(0,o.w5)((()=>[(0,o.Uk)("파일 첨부")])),_:1}),(0,o.Wm)(u,{existingFiles:l.attachFiles,onChange:l.setInputFiles,onDelete:l.addFileToDelete},null,8,["existingFiles","onChange","onDelete"])])),_:1})])),_:1}),(0,o.Wm)(z.o,{justify:"space-between"},{default:(0,o.w5)((()=>[(0,o.Wm)(f.T,{width:"150",variant:"tonal",onClick:l.clickCancelBtn},{default:(0,o.w5)((()=>[(0,o.Uk)("취소 ")])),_:1},8,["onClick"]),(0,o.Wm)(f.T,{width:"150",color:"indigo",onClick:l.clickSubmitBtn},{default:(0,o.w5)((()=>[(0,o.Uk)("등록 ")])),_:1},8,["onClick"])])),_:1})])),_:1})])])),_:1})])}function Ve(e,t,a,l,n,s){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("h2",null,(0,h.zw)(this.title),1)])}var Ae={name:"TitleHeader",props:{title:{type:String,required:!0,default:""}}};const Ze=(0,u.Z)(Ae,[["render",Ve]]);var $e=Ze,Ee=a(3121);function Ne(e,t,a,l,n,s){const r=(0,o.up)("ImageFileList");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(Ee.Z,{label:"이미지 첨부 (최대 10MB)",variant:"filled","prepend-icon":"mdi-camera",accept:"image/jpeg, image/png, image/gif, image/bmp",modelValue:l.input,"onUpdate:modelValue":t[0]||(t[0]=e=>l.input=e),onChange:l.addInputFile},null,8,["modelValue","onChange"]),(0,o.Wm)(z.o,{justify:"start"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{imageSrcList:l.existingImageSrcList,onDelete:l.deleteExistingFile},null,8,["imageSrcList","onDelete"]),(0,o.Wm)(r,{imageSrcList:l.inputImageSrcList,onDelete:l.deleteInputFile},null,8,["imageSrcList","onDelete"])])),_:1})],64)}a(2062);var Oe=a(8694);function Re(e,t,a,l,n,s){return(0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.imageSrcList,((e,t)=>((0,o.wg)(),(0,o.j4)(qe.D,{key:t,cols:"auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(Oe.f,{width:"200",height:"200",src:e},{default:(0,o.w5)((()=>[(0,o.Wm)(f.T,{class:"float-right mt-1 mr-1",density:"compact",size:"small",icon:"mdi-close",onClick:e=>l.clickDeleteBtn(t)},null,8,["onClick"])])),_:2},1032,["src"])])),_:2},1024)))),128)}var Ye={name:"ImageFileList",props:{imageSrcList:{type:Array,required:!0,default:()=>[]}},emits:["delete","cancel"],setup(e,{emit:t}){const a=e=>{t("delete",e)};return{clickDeleteBtn:a}}};const Ge=(0,u.Z)(Ye,[["render",Re]]);var Ke=Ge,Qe={name:"ImageFileInput",components:{ImageFileList:Ke},props:{existingFiles:{type:Array,required:!1,default:()=>[]}},emit:["change","delete"],setup(e,{emit:t}){let a=(0,N.iH)(null),l=(0,N.iH)([]),n=(0,o.Fl)((()=>{let t=[];for(let a=0;a<e.existingFiles.length;a++)t.push(e.existingFiles[a].url);return t})),s=(0,o.Fl)((()=>{let e=[];for(let t=0;t<l.value.length;t++)e.push(URL.createObjectURL(new Blob(l.value[t])));return e}));const r=()=>{l.value.push(a.value),a.value=null,t("change",l.value)},i=e=>{l.value.splice(e,1),t("change",l.value)},u=a=>{t("delete",e.existingFiles[a])};return{input:a,imageFiles:l,existingImageSrcList:n,inputImageSrcList:s,addInputFile:r,deleteInputFile:i,deleteExistingFile:u}}};const Je=(0,u.Z)(Qe,[["render",Ne]]);var Xe=Je;function et(e,t,a,l,n,s){const r=(0,o.up)("FileList");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(Ee.Z,{label:"파일 첨부 (최대 10MB)","show-size":"",variant:"filled","prepend-icon":"mdi-camera",modelValue:l.input,"onUpdate:modelValue":t[0]||(t[0]=e=>l.input=e),onChange:l.addInputFile},null,8,["modelValue","onChange"]),(0,o.Wm)(r,{files:a.existingFiles,deletable:!0,onDelete:l.deleteExistingFile},null,8,["files","onDelete"]),(0,o.Wm)(r,{files:l.inputFileData,deletable:!0,onDelete:l.deleteInputFile},null,8,["files","onDelete"])],64)}var tt=a(4193),at=a(4413);const lt={class:"text-right"};function ot(e,t,a,l,n,s){return(0,o.wg)(),(0,o.j4)(M._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(at.Y,null,{default:(0,o.w5)((()=>[(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.files,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:t},[(0,o._)("td",null,(0,h.zw)(e.origName)+" ("+(0,h.zw)(l.getByteSize(e.size))+")",1),(0,o._)("td",lt,[a.downloadable?((0,o.wg)(),(0,o.j4)(tt.T,{key:0},{activator:(0,o.w5)((({props:t})=>[(0,o.Wm)(f.T,(0,o.dG)({variant:"plain",icon:"mdi-download",size:"medium"},t,{onClick:t=>l.downloadFile(e)}),null,16,["onClick"])])),_:2},1024)):(0,o.kq)("",!0),a.deletable?((0,o.wg)(),(0,o.j4)(tt.T,{key:1},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(f.T,(0,o.dG)({variant:"plain",icon:"mdi-close-circle-outline",size:"medium"},e,{onClick:e=>l.clickDeleteBtn(t)}),null,16,["onClick"])])),_:2},1024)):(0,o.kq)("",!0)])])))),128))])])),_:1})])),_:1})}var nt={name:"FileList",props:{files:{type:Array,required:!0,default:()=>[]},downloadable:{type:Boolean,required:!1,default:!1},deletable:{type:Boolean,required:!1,default:!1}},emits:["delete"],setup(e,{emit:t}){const a=(0,o.f3)("axios");let l=!1;const n=()=>{l=!0},s=()=>{l=!1},r=e=>{l||(n(),a.get(`/download/${e.id}`,{responseType:"blob"}).then((e=>{const t=e.headers["content-disposition"].split("filename=")[1],a=window.URL.createObjectURL(new Blob([e.data])),l=document.createElement("a");l.href=a,l.setAttribute("download",decodeURI(t)),document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(a)})).catch((e=>{console.log(e),alert("다운로드가 실패했습니다. 잠시 후 다시 시도해주세요.")})).finally((()=>{s()})))},i=e=>{t("delete",e)},u=e=>{const t=["KB","MB","GB","TB"];for(let a=0;a<t.length;a++)if(e/=1024,e<1024)return e.toFixed(1)+t[a]};return{downloadFile:r,clickDeleteBtn:i,getByteSize:u}}};const st=(0,u.Z)(nt,[["render",ot]]);var rt=st,it={name:"AttachFileInput",components:{FileList:rt},props:{existingFiles:{type:Array,required:!1,default:()=>[]}},emit:["change","delete"],setup(e,{emit:t}){let a=(0,N.iH)(null),l=(0,N.iH)([]);const n=()=>{l.value.push(a.value),a.value=null,t("change",l.value)},s=e=>{l.value.splice(e,1),t("change",l.value)},r=a=>{t("delete",e.existingFiles[a])},i=(0,o.Fl)((()=>{let e=[];for(let t=0;t<l.value.length;t++){const a=l.value[t];e.push({origName:a[0].name,size:a[0].size})}return e}));return{input:a,inputFileData:i,addInputFile:n,deleteInputFile:s,deleteExistingFile:r}}};const ut=(0,u.Z)(it,[["render",et]]);var ct=ut;const dt=e=>{let t=0;if(!e)return t;const a=e.toString();for(let l=0;l<a.length;l++){const e=a.charCodeAt(l);t+=pt(e)}return t},mt=(e,t)=>{const a="...";if(!e||dt(e)<=t)return e;let l=e.toString(),o=0;for(let n=0;n<l.length;n++)if(o+=pt(l.charCodeAt(n)),o>t)return[...l].slice(0,n).join("")+a},pt=e=>e<=127?1:e<=2047?2:e<65535?3:4;var gt={getByteSize:dt,curtailTextInBytes:mt},ht={name:"BoardWrite",components:{AttachFileInput:ct,ImageFileInput:Xe,TitleHeader:$e},props:["postId"],setup(e){const t=(0,o.f3)("axios");let a=(0,m.yj)(),l=(0,N.iH)(!1),n=(0,N.iH)({}),s=(0,N.iH)([]),r=(0,N.iH)([]);(0,o.bv)((()=>{if(e.postId){const e=xe.getters["postStore/getPost"];e.fileExists&&i(e.id),n.value=e.boardInfo,u(n.value["id"]),g(e),l.value=!0}else a.query.boardId&&(n.value=xe.getters["boardInfoStore/getBoardInfo"],u(n.value["id"]))}));const i=e=>{t.get(`/posts/${e}/files`).then((e=>{r.value=e.data.data})).catch((e=>{console.log(e)}))},u=e=>{t.get(`/boards/${e}/categories`).then((e=>{console.log(e.data),s.value=e.data.data})).catch((e=>{console.log(e)}))};let c=(0,N.iH)({categoryId:null,title:"",content:"",secret:!1,attachmentFiles:[],contentFiles:[]});const d={categoryId:[e=>!!e||"카테고리를 선택해주세요.",e=>-1!==s.value.find((t=>t.id===e))||"유효한 카테고리 값을 입력해주세요."],title:[e=>!!e||"제목을 입력해주세요.",e=>e.replace(/^\s+|\s+$/g,"").length>0||"제목을 입력해주세요.",e=>gt.getByteSize(e)<300||"제목을 300byte(한글 100자) 이내로 입력해주세요."],content:[e=>gt.getByteSize(e)<6e3||"내용을 6000byte(한글 2000자) 이내로 입력해주세요."],secret:[e=>"boolean"===typeof e||"유효한 비밀글 여부 값을 입력해주세요."]},p=()=>{for(let e of d.categoryId)if(!0!==e(c.value.categoryId))return alert(e(c.value.categoryId)),!1;for(let e of d.title)if(!0!==e(c.value.title))return alert(e(c.value.title)),!1;for(let e of d.content)if(!0!==e(c.value.content))return alert(e(c.value.content)),!1;for(let e of d.content)if(!0!==e(c.value.content))return alert(e(c.value.content)),!1;for(let e of d.secret)if(!0!==e(c.value.secret))return alert(e(c.value.secret)),!1;return!0},g=e=>{c.value.categoryId=e.category.id,c.value.title=e.title,c.value.content=e.content,c.value.secret=e.secret},h=e=>{c.value.contentFiles=e},f=e=>{c.value.attachmentFiles=e};let v=(0,o.Fl)((()=>0===r.value.length?[]:r.value.filter((e=>"ATTACHMENT"===e.type&&!S.value.find((t=>t===e.id)))))),w=(0,o.Fl)((()=>0===r.value.length?[]:r.value.filter((e=>"CONTENT"===e.type&&!S.value.find((t=>t===e.id)))))),y=!1,k=!1;const b=()=>{y=!0},_=()=>{y=!1},D=()=>{k=!0},C=()=>{k=!1},T=async()=>{if(p())if(l.value&&!k){D();const t=[];if(I()&&t.push(x()),(c.value.attachmentFiles.length>0||c.value.contentFiles.length>0)&&t.push(P(e.postId)),S.value.length>0){const e=S.value.map(F);t.push(Promise.all(e))}Promise.all(t).then((()=>{B(e.postId)})).catch((()=>{alert("게시물 수정을 완료하지 못했습니다.")})).finally((()=>{C()}))}else l.value||y||(b(),c.value.contentFiles.length>0||c.value.attachmentFiles.length>0?W().then((e=>{const t=e.data.data;P(t).then((()=>{B(t)})).catch((()=>{alert("파일 등록을 실패했습니다.")})).finally((()=>{_()}))})).catch((()=>{_(),alert("게시물 등록을 실패했습니다.")})):W().then((e=>{const t=e.data.data;B(t)})).catch((()=>{alert("게시물 등록을 실패했습니다.")})).finally((()=>{_()})))},W=()=>{const e=new FormData;return e.set("categoryId",c.value.categoryId),e.set("title",c.value.title),e.set("content",c.value.content),e.set("secret",c.value.secret),t.post(`/boards/${n.value.id}/posts`,e)},I=()=>{const e=xe.getters["postStore/getPost"];return e.category.id!==c.value.categoryId||(e.title!==c.value.title||(e.content!==c.value.content||e.secret!==c.value.secret))},x=()=>{const a=new FormData;return a.set("categoryId",c.value.categoryId),a.set("title",c.value.title),a.set("content",c.value.content),a.set("secret",c.value.secret),t.patch(`/posts/${e.postId}`,a)},P=e=>{const a=new FormData;for(let t=0;t<c.value.attachmentFiles.length;t++)a.set(`attachment[${t}]`,c.value.attachmentFiles[t][0]);for(let t=0;t<c.value.contentFiles.length;t++)a.set(`content[${t}]`,c.value.contentFiles[t][0]);return t.post(`/posts/${e}/files`,a,{headers:{"Content-Type":"multipart/form-data"}})};let S=(0,N.iH)([]);const U=e=>{S.value.push(e.id)},F=e=>t.delete(`/files/${e}`),B=e=>{Sn.push({path:`/portal/${e}`})},q=()=>{Sn.go(-1)};return{rules:d,input:c,boardInfo:n,categories:s,contentFiles:w,attachFiles:v,modifyMode:l,clickSubmitBtn:T,clickCancelBtn:q,addFileToDelete:U,setInputImages:h,setInputFiles:f,ByteUtil:gt}}};const ft=(0,u.Z)(ht,[["render",ze],["__scopeId","data-v-4ae39276"]]);var vt=ft,wt=a(3601),yt=a(4075);const kt=e=>((0,o.dD)("data-v-07e35216"),e=e(),(0,o.Cn)(),e),bt={key:0,class:"file-area"},_t=kt((()=>(0,o._)("div",{class:"mb-3",style:{"font-weight":"bold"}},"첨부 파일",-1))),Dt={key:1,class:"comment-area"},Ct=kt((()=>(0,o._)("div",{class:"mb-3 text-h6",style:{"font-weight":"bold"}},"댓글",-1))),Tt={class:"btn-area"},Wt={class:"text-end"},It={key:2},xt={key:3},Pt={key:0},St={class:"reply-area"},Ut={class:"text-end"},Ft={key:1};function Bt(e,t,a,l,n,s){const r=(0,o.up)("TitleHeader"),i=(0,o.up)("PostDetail"),u=(0,o.up)("FileList"),c=(0,o.up)("CommentList"),d=(0,o.up)("TwoButtonModal"),m=(0,o.up)("AnswerForm"),p=(0,o.up)("AnswerDetail");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(r,{title:l.boardInfo.subject},null,8,["title"]),(0,o._)("div",null,[(0,o.Wm)(i,{post:l.post,images:l.contentFiles},null,8,["post","images"])]),"NONE"!==l.boardInfo.accessFile&&l.attachFiles.length>0?((0,o.wg)(),(0,o.iD)("div",bt,[_t,(0,o.Wm)(u,{files:l.attachFiles,downloadable:s.authorization(l.boardInfo.accessFile)},null,8,["files","downloadable"])])):(0,o.kq)("",!0),(0,o.Wm)(yt.J,{class:"mt-6 mb-6",thickness:"3"}),"NONE"!==l.boardInfo.accessComment?((0,o.wg)(),(0,o.iD)("div",Dt,[Ct,(0,o.Wm)(c,{comments:l.comments,postId:l.post.id,onReloadComments:l.fetchComments},null,8,["comments","postId","onReloadComments"])])):(0,o.kq)("",!0),(0,o._)("div",Tt,[(0,o._)("div",Wt,[(0,o.Wm)(f.T,{width:"100",color:"indigo",onClick:l.moveToList},{default:(0,o.w5)((()=>[(0,o.Uk)("목록")])),_:1},8,["onClick"]),l.writerMode?((0,o.wg)(),(0,o.j4)(f.T,{key:0,class:"ml-2 mr-2",width:"100",variant:"tonal",color:"indigo",onClick:l.moveToModify},{default:(0,o.w5)((()=>[(0,o.Uk)("수정 ")])),_:1},8,["onClick"])):(0,o.kq)("",!0),(0,o.Wm)(wt.B,{modelValue:l.deleteDialog,"onUpdate:modelValue":t[0]||(t[0]=e=>l.deleteDialog=e),persistent:"",width:"500",color:"indigo"},{activator:(0,o.w5)((({props:e})=>[l.writerMode?((0,o.wg)(),(0,o.j4)(f.T,(0,o.dG)({key:0},e,{width:"100",variant:"outlined",color:"indigo",onClick:l.openDeleteDialog}),{default:(0,o.w5)((()=>[(0,o.Uk)("삭제 ")])),_:2},1040,["onClick"])):(0,o.kq)("",!0)])),default:(0,o.w5)((()=>[(0,o.Wm)(d,{question:"정말 삭제하시겠습니까?",onSendAnswer:l.closeDeleteDialog},null,8,["onSendAnswer"])])),_:1},8,["modelValue"])])]),s.authorization(l.boardInfo.accessReplyWrite)&&!l.post.childExists?((0,o.wg)(),(0,o.iD)("div",It,[l.openAnswerForm?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(f.T,{key:0,class:"font-weight-bold text-h6",width:"200",height:"50",variant:"tonal",color:"indigo",onClick:t[1]||(t[1]=e=>l.openAnswerForm=!0)},{default:(0,o.w5)((()=>[(0,o.Uk)("답변 작성 ")])),_:1})),l.openAnswerForm?((0,o.wg)(),(0,o.j4)(m,{key:1,onSubmit:l.submitReply,onCancel:t[2]||(t[2]=e=>l.openAnswerForm=!1)},null,8,["onSubmit"])):(0,o.kq)("",!0)])):(0,o.kq)("",!0),s.authorization(l.boardInfo.accessReplyRead)&&l.post.childExists?((0,o.wg)(),(0,o.iD)("div",xt,[l.openAnswerForm?((0,o.wg)(),(0,o.iD)("div",Ft,[(0,o.Wm)(m,{initialData:l.reply,onSubmit:l.modifyReply,onCancel:t[4]||(t[4]=e=>l.openAnswerForm=!1)},null,8,["initialData","onSubmit"])])):((0,o.wg)(),(0,o.iD)("div",Pt,[(0,o._)("div",St,[(0,o.Wm)(p,{post:l.reply},null,8,["post"])]),(0,o._)("div",Ut,[s.authorization(l.boardInfo.accessReplyWrite)?((0,o.wg)(),(0,o.j4)(f.T,{key:0,width:"100",variant:"tonal",color:"indigo",onClick:t[3]||(t[3]=e=>l.openAnswerForm=!0)},{default:(0,o.w5)((()=>[(0,o.Uk)("수정 ")])),_:1})):(0,o.kq)("",!0)])]))])):(0,o.kq)("",!0)])}var qt=a(1334);const Lt={class:"text-area"};function Mt(e,t,a,l,n,s){return(0,o.wg)(),(0,o.j4)(M._,{class:"modal-area",variant:"tonal",color:"indigo"},{default:(0,o.w5)((()=>[(0,o._)("div",Lt,(0,h.zw)(a.question),1),(0,o.Wm)(qt.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f.T,{class:"mr-2",color:"indigo",variant:"outlined",width:"150px",onClick:t[0]||(t[0]=e=>l.sendAnswer(!1))},{default:(0,o.w5)((()=>[(0,o.Uk)("Cancel ")])),_:1}),(0,o.Wm)(f.T,{class:"ml-2",color:"indigo",variant:"flat",width:"150px",onClick:t[1]||(t[1]=e=>l.sendAnswer(!0))},{default:(0,o.w5)((()=>[(0,o.Uk)("OK ")])),_:1})])),_:1})])),_:1})}var Ht={name:"TwoButtonModal",props:{question:{type:String,required:!0}},emits:["sendAnswer"],setup(e,{emit:t}){const a=e=>{t("sendAnswer",e)};return{sendAnswer:a}}};const jt=(0,u.Z)(Ht,[["render",Mt],["__scopeId","data-v-0c90732b"]]);var zt=jt;const Vt=e=>((0,o.dD)("data-v-b1f87c6c"),e=e(),(0,o.Cn)(),e),At={key:0,colspan:"100%"},Zt={class:"form-area"},$t={key:1},Et=Vt((()=>(0,o._)("div",null,"로그인 후 댓글에 참여해보세요",-1)));function Nt(e,t,a,l,n,s){const r=(0,o.up)("CommentDetail"),i=(0,o.up)("CommentForm");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(M._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(at.Y,null,{default:(0,o.w5)((()=>[(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.comments,((e,t)=>((0,o.wg)(),(0,o.j4)(r,{key:t,comment:e,onReply:l.submitReply,onModify:l.modifyComment,onDelete:l.deleteComment},null,8,["comment","onReply","onModify","onDelete"])))),128)),(0,o._)("tr",null,[l.isAuthenticated?((0,o.wg)(),(0,o.iD)("td",At,[(0,o._)("div",Zt,[(0,o.Wm)(i,{name:l.member.name,placehold:"댓글을 남겨보세요",onSubmit:l.submitComment},null,8,["name","onSubmit"])])])):((0,o.wg)(),(0,o.iD)("td",$t,[(0,o._)("div",{class:"d-flex",onClick:t[0]||(t[0]=(...e)=>l.moveToLogin&&l.moveToLogin(...e))},[Et,(0,o.Wm)(ee.t,{icon:"mdi-chevron-right"})])]))])])])),_:1})])),_:1})])}const Ot={class:"align-content-center"},Rt={class:"card-text"},Yt={key:0};function Gt(e,t,a,l,n,s){const r=(0,o.up)("OneButtonModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(wt.B,{modelValue:l.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>l.dialog=e),class:"m-5",width:"auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{message:l.dialogMessage,onClose:t[0]||(t[0]=e=>l.dialog=!1)},null,8,["message"])])),_:1},8,["modelValue"]),(0,o._)("div",Ot,[(0,o.Wm)(M._,{variant:"outlined",color:"grey-lighten-1",width:"100%",class:"card-body",compact:""},{default:(0,o.w5)((()=>[(0,o._)("div",Rt,[a.name?((0,o.wg)(),(0,o.iD)("div",Yt,(0,h.zw)(a.name),1)):(0,o.kq)("",!0),(0,o.Wm)(He.z,{modelValue:l.content,"onUpdate:modelValue":t[2]||(t[2]=e=>l.content=e),variant:"underlined",rows:"1","auto-grow":"",counter:l.maxLength,rules:[l.rules.maxLength],placeholder:a.placeHold},null,8,["modelValue","counter","rules","placeholder"])]),(0,o.Wm)(qt.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(z.o,{justify:"end"},{default:(0,o.w5)((()=>[a.cancellable?((0,o.wg)(),(0,o.j4)(f.T,{key:0,width:"80",height:"30",variant:"outlined",onClick:l.cancel},{default:(0,o.w5)((()=>[(0,o.Uk)("취소 ")])),_:1},8,["onClick"])):(0,o.kq)("",!0),(0,o.Wm)(f.T,{width:"80",height:"30",variant:"tonal",color:"indigo",onClick:l.submitComment},{default:(0,o.w5)((()=>[(0,o.Uk)("등록 ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])],64)}var Kt=a(1888);function Qt(e,t,a,l,n,s){return(0,o.wg)(),(0,o.j4)(M._,{class:"modal-area"},{default:(0,o.w5)((()=>[(0,o.Wm)(Kt.Z,{class:"text-area"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,h.zw)(a.message),1)])),_:1}),(0,o.Wm)(qt.h,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(f.T,{variant:"flat",color:"indigo",block:"",onClick:l.close},{default:(0,o.w5)((()=>[(0,o.Uk)("확인")])),_:1},8,["onClick"])])),_:1})])),_:1})}var Jt={name:"OneButtonModal",props:{message:{type:String,required:!0}},emits:["close"],setup(e,{emit:t}){const a=()=>{t("close")};return{close:a}}};const Xt=(0,u.Z)(Jt,[["render",Qt],["__scopeId","data-v-1c20ec26"]]);var ea=Xt,ta={name:"CommentForm",components:{OneButtonModal:ea},props:{name:{type:String,required:!1},text:{type:String,required:!1,default:""},cancellable:{type:Boolean,required:!1,default:!1},placeHold:{type:String,required:!1,default:""}},emits:["submit"],setup(e,{emit:t}){let a=(0,N.iH)(e.text),l=(0,N.iH)(!1),o=(0,N.iH)("");const n=1e3,s={require:e=>!!e||"내용을 입력해주세요",maxLength:e=>e?.length<n||`${n}자까지 작성할 수 있습니다`},r=()=>{u()&&(t("submit",a.value),a.value="")},i=()=>{t("cancel")},u=()=>{for(let e in s)if(!0!==s[e](a.value))return o.value=s[e](a.value),l.value=!0,!1;return!0};return{content:a,rules:s,dialog:l,dialogMessage:o,maxLength:n,submitComment:r,cancel:i}}};const aa=(0,u.Z)(ta,[["render",Gt],["__scopeId","data-v-7d5d29b6"]]);var la=aa;const oa=e=>((0,o.dD)("data-v-8cc2b550"),e=e(),(0,o.Cn)(),e),na={key:0,class:"list-area"},sa={key:0,class:"list-item"},ra=oa((()=>(0,o._)("div",null,"삭제된 댓글입니다.",-1))),ia=oa((()=>(0,o._)("div",null,null,-1))),ua=[ra,ia],ca={key:1,class:"list-item"},da={style:{"font-weight":"bold"}},ma={style:{color:"darkgray"}},pa={class:"menu-btn"},ga={key:1},ha={class:"form-area"},fa={key:2},va={class:"form-area"};function wa(e,t,a,l,n,s){const r=(0,o.up)("CommentForm");return(0,o.wg)(),(0,o.iD)(o.HY,null,[l.modifyMode?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("tr",na,[(0,o._)("td",{style:(0,h.j5)({"padding-left":5*a.comment.depth+"%"})},[a.comment.deleted?((0,o.wg)(),(0,o.iD)("div",sa,ua)):((0,o.wg)(),(0,o.iD)("div",ca,[(0,o._)("div",da,(0,h.zw)(a.comment.member.name),1),(0,o._)("div",null,(0,h.zw)(a.comment.content),1),(0,o._)("div",ma,[(0,o.Uk)((0,h.zw)(l.DateUtil.dateTimeToString(a.comment.regDate))+" ",1),(0,o._)("a",{class:"ml-2",style:{cursor:"pointer"},onClick:t[0]||(t[0]=e=>l.setReplyMode(!0))},"답글 달기")])]))],4),(0,o._)("td",pa,[l.visibleMenu?((0,o.wg)(),(0,o.j4)(tt.T,{key:0},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(f.T,(0,o.dG)({variant:"plain",icon:"mdi-dots-vertical",size:"x-small",height:"50"},e),null,16)])),default:(0,o.w5)((()=>[(0,o.Wm)(ae.i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(le.l,{onClick:t[1]||(t[1]=e=>l.setModifyMode(!0))},{default:(0,o.w5)((()=>[(0,o.Uk)("수정")])),_:1}),(0,o.Wm)(le.l,{onClick:l.deleteComment},{default:(0,o.w5)((()=>[(0,o.Uk)("삭제")])),_:1},8,["onClick"])])),_:1})])),_:1})):(0,o.kq)("",!0)])])),l.modifyMode?((0,o.wg)(),(0,o.iD)("tr",ga,[(0,o._)("td",{colspan:"100%",style:(0,h.j5)({"padding-left":5*a.comment.depth+"%"})},[(0,o._)("div",ha,[(0,o.Wm)(r,{text:a.comment.content,cancellable:!0,onSubmit:l.modifyComment,onCancel:t[2]||(t[2]=e=>l.setModifyMode(!1))},null,8,["text","onSubmit"])])],4)])):(0,o.kq)("",!0),l.replyMode?((0,o.wg)(),(0,o.iD)("tr",fa,[(0,o._)("td",{colspan:"100%",style:(0,h.j5)({"padding-left":5*(a.comment.depth+1)+"%"})},[(0,o._)("div",va,[(0,o.Wm)(r,{cancellable:!0,placeHold:`${a.comment.member.name} 님에게 답글 달기`,onSubmit:l.submitReply,onCancel:t[3]||(t[3]=e=>l.setReplyMode(!1))},null,8,["placeHold","onSubmit"])])],4)])):(0,o.kq)("",!0)],64)}function ya(e){const t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,o=t.getDate(),n=t.getHours(),s=t.getMinutes();return`${a}.${l<10?"0"+l:l}.${o<10?"0"+o:o} ${n<10?"0"+n:n}:${s<10?"0"+s:s}`}function ka(e){const t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,o=t.getDate();return`${a}-${l<10?"0"+l:l}-${o<10?"0"+o:o}`}function ba(){const e=new Date;return ka(e)}function _a(){const e=new Date,t=e.getDate();return e.setDate(t-7),ka(e)}var Da={dateToString:ka,dateTimeToString:ya,getToday:ba,getLastWeek:_a},Ca={name:"CommentDetail",components:{CommentForm:la},props:{comment:{type:Object,require:!0}},emits:["reply","modify","delete"],setup(e,{emit:t}){let a=(0,N.iH)(!1),l=(0,N.iH)(!1),n=xe.getters["authStore/getMember"];const s=(0,o.Fl)((()=>n["username"]===e.comment.member["username"])),r=e=>{a.value=e},i=e=>{l.value=e},u=a=>{t("reply",e.comment.id,a),i(!1)},c=a=>{t("modify",e.comment.id,a),r(!1)},d=()=>{t("delete",e.comment.id)};return{DateUtil:Da,modifyMode:a,replyMode:l,visibleMenu:s,setReplyMode:i,setModifyMode:r,modifyComment:c,submitReply:u,deleteComment:d}}};const Ta=(0,u.Z)(Ca,[["render",wa],["__scopeId","data-v-8cc2b550"]]);var Wa=Ta,Ia={name:"CommentList",components:{CommentDetail:Wa,CommentForm:la},props:{postId:{type:Number,required:!0},comments:{type:Array,required:!1,default:()=>[]}},setup(e,{emit:t}){const a=(0,_.oR)(),l=a.getters["authStore/isAuthenticated"],n=a.getters["authStore/getMember"],s=(0,o.f3)("axios");let r=!1;const i=()=>{r=!0},u=()=>{r=!1},c=a=>{if(r)return;i();const l=new FormData;l.set("content",a),s.post(`/posts/${e.postId}/comments`,l).then((()=>{t("reloadComments")})).catch((e=>{400===e.response.status&&e.response.data&&e.response.data.message?alert(e.response.data.message):alert("댓글 작성에 실패했습니다. 잠시 후 다시 시도해주세요.")})).finally((()=>{u()}))},d=(a,l)=>{if(r)return;i();const o=new FormData;o.set("content",l),s.post(`/posts/${e.postId}/comments/${a}/replies`,o).then((e=>{console.log(e.data),t("reloadComments")})).catch((e=>{400===e.response.status&&e.response.data&&e.response.data.message?alert(e.response.data.message):alert("댓글 작성에 실패했습니다. 잠시 후 다시 시도해주세요.")})).finally((()=>{u()}))},p=(e,a)=>{if(r)return;i();const l=new FormData;l.set("content",a),s.patch(`/comments/${e}`,l).then((e=>{console.log(e.data),t("reloadComments")})).catch((e=>{console.log(e.data)})).finally((()=>{u()}))},g=e=>{r||(i(),s.delete(`/comments/${e}`).then((e=>{console.log(e.data),t("reloadComments")})).catch((e=>{console.log(e.data)})).finally((()=>{u()})))};let h=(0,m.tv)();const f=()=>{h.push({path:"/login"})};return{member:n,moveToLogin:f,submitComment:c,submitReply:d,modifyComment:p,deleteComment:g,isAuthenticated:l}}};const xa=(0,u.Z)(Ia,[["render",Nt],["__scopeId","data-v-b1f87c6c"]]);var Pa=xa,Sa=a(7327);class Ua{constructor(e){(0,Sa.Z)(this,"boardId",void 0),(0,Sa.Z)(this,"boardType",void 0),(0,Sa.Z)(this,"categoryId",void 0),(0,Sa.Z)(this,"searchWord",void 0),(0,Sa.Z)(this,"startDate",void 0),(0,Sa.Z)(this,"endDate",void 0),(0,Sa.Z)(this,"page",void 0),this.boardId=e.boardId,this.page=e.page?e.page:1,this.boardType=e.boardType,this.categoryId=e.categoryId?parseInt(e.categoryId):e.categoryId,this.searchWord=e.searchWord,this.startDate=e.startDate,this.endDate=e.endDate}setBoardType(e){this.boardType=e}setBoardId(e){this.boardId=e}setPage(e){this.page=e}setSearchEvent(e){this.page=1,this.categoryId=e.categoryId,e.searchWord&&(this.searchWord=e.searchWord.trim()),this.startDate=e.startDate,this.endDate=e.endDate}getRequestParam(){let e={};return e.boardType=this.boardType,this.categoryId&&(e.categoryId=this.categoryId),this.searchWord&&(e.searchWord=this.searchWord),this.startDate&&(e.startDate=this.startDate),this.endDate&&(e.endDate=this.endDate),this.page?e.page=this.page:e.page=1,e}getQueryParam(){return{boardId:this.boardId,...this.getRequestParam()}}}const Fa={class:"post-area"},Ba={class:"mb-2"},qa={class:"mb-2"},La={class:"text-h5"},Ma={class:"text-subtitle-1"},Ha={class:"d-flex justify-space-between"},ja={style:{color:"darkgray"}},za={key:0,style:{color:"darkgray"}},Va=["src"],Aa=["textContent"];function Za(e,t,a,l,n,s){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",Fa,[(0,o._)("div",Ba,(0,h.zw)(a.post.category?.name),1),(0,o._)("div",qa,[(0,o._)("div",La,(0,h.zw)(a.post.title),1)]),(0,o._)("div",null,[(0,o._)("div",Ma,(0,h.zw)(a.post.member?.name),1)]),(0,o._)("div",Ha,[(0,o._)("div",ja,(0,h.zw)(l.DateUtil.dateTimeToString(a.post.regDate))+"   조회수: "+(0,h.zw)(a.post.hit),1),a.post.modDate?((0,o.wg)(),(0,o.iD)("div",za," 수정 일시: "+(0,h.zw)(l.DateUtil.dateTimeToString(a.post.modDate)),1)):(0,o.kq)("",!0)]),(0,o.Wm)(yt.J,{class:"mt-6 mb-12",thickness:"2"}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.images,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t},[(0,o._)("img",{class:"mb-2",src:e.url,style:{"max-width":"100%",height:"auto"}},null,8,Va)])))),128)),(0,o._)("div",{textContent:(0,h.zw)(a.post.content),style:{"white-space":"pre-line"}},null,8,Aa)])])}var $a={name:"PostDetail",props:{post:{type:Object,required:!0,default:()=>({})},images:{type:Array,required:!1,default:()=>[]}},setup(){return{DateUtil:Da}}};const Ea=(0,u.Z)($a,[["render",Za],["__scopeId","data-v-77454c3e"]]);var Na=Ea;const Oa=e=>{switch(e){case"NONE":return!1;case"ALL":return!0;case"USER":return xe.getters["authStore/isAuthenticated"];case"ADMIN":return xe.getters["authStore/isAdmin"]}return!1};var Ra=a(6596);function Ya(e,t,a,l,n,s){return(0,o.wg)(),(0,o.j4)(M._,{class:"card-body"},{default:(0,o.w5)((()=>[(0,o.Wm)(H.E,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" 답변 작성")])),_:1}),(0,o.Wm)(Ra._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Le.J,{class:"ms-2 mb-2"},{default:(0,o.w5)((()=>[(0,o.Uk)("제목")])),_:1}),(0,o.Wm)(V.h,{modelValue:l.input.title,"onUpdate:modelValue":t[0]||(t[0]=e=>l.input.title=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(Ra._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Le.J,{class:"ms-2 mb-2"},{default:(0,o.w5)((()=>[(0,o.Uk)("내용")])),_:1}),(0,o.Wm)(He.z,{rows:"10","row-height":"25",modelValue:l.input.content,"onUpdate:modelValue":t[1]||(t[1]=e=>l.input.content=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(qt.h,{class:"justify-space-between"},{default:(0,o.w5)((()=>[(0,o.Wm)(f.T,{width:"150",variant:"tonal",onClick:l.clickCancelBtn},{default:(0,o.w5)((()=>[(0,o.Uk)("취소")])),_:1},8,["onClick"]),(0,o.Wm)(f.T,{width:"150",variant:"outlined",color:"indigo",onClick:l.clickSubmitBtn},{default:(0,o.w5)((()=>[(0,o.Uk)("등록 ")])),_:1},8,["onClick"])])),_:1})])),_:1})}var Ga={name:"AnswerForm",props:{initialData:{type:Object,required:!1}},emits:["cancel"],setup(e,{emit:t}){let a=(0,N.iH)(!1);const l=()=>{t("cancel")},n=()=>{a.value?t("submit",e.initialData.id,s.value):t("submit",s.value)};(0,o.bv)((()=>{e.initialData&&(a.value=!0,s.value.title=e.initialData.title,s.value.content=e.initialData.content)}));let s=(0,N.iH)({title:"",content:""});return{input:s,clickCancelBtn:l,clickSubmitBtn:n}}};const Ka=(0,u.Z)(Ga,[["render",Ya],["__scopeId","data-v-7ce1db5a"]]);var Qa=Ka;const Ja=e=>((0,o.dD)("data-v-59888ece"),e=e(),(0,o.Cn)(),e),Xa={class:"text-h5 mb-2"},el={class:"d-flex justify-space-between text-subtitle-1"},tl=Ja((()=>(0,o._)("div",null,"관리자",-1))),al=["textContent"];function ll(e,t,a,l,n,s){return(0,o.wg)(),(0,o.j4)(M._,{class:"card-body"},{default:(0,o.w5)((()=>[(0,o.Wm)(H.E,{class:"title-area"},{default:(0,o.w5)((()=>[(0,o._)("div",Xa,(0,h.zw)(a.post.title),1),(0,o._)("div",el,[tl,(0,o._)("div",null," 답변 일시 "+(0,h.zw)(l.DateUtil.dateTimeToString(a.post.regDate)),1)])])),_:1}),(0,o.Wm)(Kt.Z,{class:"content-area"},{default:(0,o.w5)((()=>[(0,o._)("div",{textContent:(0,h.zw)(a.post.content),style:{"white-space":"pre-line"}},null,8,al)])),_:1})])),_:1})}var ol={name:"AnswerDetail",props:{post:{type:Object,required:!0,default:()=>({})}},setup(){return{DateUtil:Da}}};const nl=(0,u.Z)(ol,[["render",ll],["__scopeId","data-v-59888ece"]]);var sl=nl,rl={name:"BoardDetail",methods:{authorization:Oa},components:{AnswerDetail:sl,AnswerForm:Qa,FileList:rt,PostDetail:Na,CommentList:Pa,TwoButtonModal:zt,TitleHeader:$e},setup(){const e=(0,o.f3)("axios"),t=new m.yj;let a=new Ua(t.query),l=(0,N.iH)({}),n=(0,N.iH)([]),s=(0,N.iH)({}),r=(0,N.iH)([]),i=(0,N.iH)({});(0,o.bv)((()=>{l.value=xe.getters["postStore/getPost"],s.value=l.value.boardInfo,a.setBoardId(s.value.id),l.value.fileExists&&u(),l.value.commentExists&&c(),l.value.childExists&&d()}));const u=()=>{e.get(`/posts/${l.value.id}/files`).then((e=>{n.value=e.data.data})).catch((e=>{console.log(e)}))},c=()=>{e.get(`/posts/${l.value.id}/comments`).then((e=>{r.value=e.data.data})).catch((e=>{console.log(e)}))},d=()=>{e.get(`/posts/${l.value.id}/replies`).then((e=>{console.log(e.data),i.value=e.data.data})).catch((e=>{console.log(e)}))};let p=(0,o.Fl)((()=>n.value.filter((e=>"ATTACHMENT"===e.type)))),g=(0,o.Fl)((()=>n.value.filter((e=>"CONTENT"===e.type))));const h=()=>{Sn.push({path:"/portal",query:{...a.getQueryParam()}})};let f=(0,o.Fl)((()=>xe.getters["authStore/getMember"])),v=(0,o.Fl)((()=>!!l.value.member&&f.value["username"]===l.value.member["username"])),w=(0,o.Fl)((()=>xe.getters["authStore/isAdmin"])),y=(0,N.iH)(!1);const k=e=>{y.value=!1,e&&W()},b=()=>{D||(y.value=!0)};let _=(0,N.iH)(!1),D=!1;const C=()=>{D=!0},T=()=>{D=!1},W=()=>{C(),e.delete(`/posts/${l.value.id}`).then((()=>{h()})).catch((()=>{alert("게시물 삭제를 실패했습니다.")})).finally((()=>{T()}))},I=()=>{l.value.childExists?alert("답변이 존재하는 경우 수정할 수 없습니다."):Sn.push({path:`/portal/write/${l.value.id}`})},x=t=>{if(D)return;C();const a=new FormData;a.set("title",t.title),a.set("content",t.content),a.set("categoryId",l.value.category.id),a.set("secret",l.value.secret),e.post(`/posts/${l.value.id}/replies`,a).then((()=>{Sn.go()})).catch((e=>{console.log(e)})).finally((()=>{T()}))},P=(t,a)=>{if(D)return;C();const o=new FormData;o.set("title",a.title),o.set("content",a.content),o.set("categoryId",l.value.category.id),o.set("secret",l.value.secret),e.patch(`/posts/${t}`,o).then((()=>{Sn.go()})).catch((e=>{console.log(e)})).finally((()=>{T()}))};return{deleteDialog:y,openAnswerForm:_,boardInfo:s,post:l,comments:r,reply:i,attachFiles:p,contentFiles:g,writerMode:v,adminMode:w,fetchComments:c,moveToList:h,moveToModify:I,openDeleteDialog:b,closeDeleteDialog:k,submitReply:x,modifyReply:P}}};const il=(0,u.Z)(rl,[["render",Bt],["__scopeId","data-v-07e35216"]]);var ul=il;const cl={class:"list-area"},dl={key:0},ml={class:"mb-2"},pl={key:1},gl={class:"d-flex justify-space-between mb-2"},hl={class:"text-left mt-2"},fl={class:"text-right"},vl={key:0},wl={key:1},yl={class:"text-right"},kl={class:"page-bar-area"};function bl(e,t,a,l,n,s){const r=(0,o.up)("SearchBox"),i=(0,o.up)("QnaList"),u=(0,o.up)("BoardTypeConverter"),c=(0,o.up)("GalleryList"),d=(0,o.up)("PostList"),m=(0,o.up)("PaginationBar");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(r,{categories:l.categories,criteria:l.criteria,onSearchEvent:l.clickSearchBtn},null,8,["categories","criteria","onSearchEvent"]),(0,o._)("div",cl,["Q"===l.criteria.boardType?((0,o.wg)(),(0,o.iD)("div",dl,[(0,o._)("div",ml,"총 "+(0,h.zw)(l.pageInfo.totalCount)+"건",1),(0,o.Wm)(i,{posts:l.posts,onClickTitle:l.moveToDetail},null,8,["posts","onClickTitle"])])):((0,o.wg)(),(0,o.iD)("div",pl,[(0,o._)("div",gl,[(0,o._)("div",hl,"총 "+(0,h.zw)(l.pageInfo.totalCount)+"건",1),(0,o._)("div",fl,[(0,o.Wm)(u,{currentBoardType:l.criteria.boardType,onConvertType:l.convertBoardType},null,8,["currentBoardType","onConvertType"])])]),"I"===l.criteria.boardType?((0,o.wg)(),(0,o.iD)("div",vl,[(0,o.Wm)(c,{posts:l.posts,onClickItem:l.moveToDetail},null,8,["posts","onClickItem"])])):((0,o.wg)(),(0,o.iD)("div",wl,[(0,o.Wm)(d,{posts:l.posts,onClickTitle:l.moveToDetail},null,8,["posts","onClickTitle"])]))]))]),(0,o._)("div",yl,[s.authorization(l.boardInfo.accessWrite)?((0,o.wg)(),(0,o.j4)(f.T,{key:0,width:"150",color:"indigo",onClick:l.clickWriteBtn},{default:(0,o.w5)((()=>[(0,o.Uk)("등록 ")])),_:1},8,["onClick"])):(0,o.kq)("",!0)]),(0,o._)("div",kl,[(0,o.Wm)(m,{"page-info":l.pageInfo,"display-page-count":10,onHandlePage:l.moveToPage},null,8,["page-info","onHandlePage"])])])}var _l=a(9234),Dl=a(4286);function Cl(e,t,a,l,n,s){return(0,o.wg)(),(0,o.j4)(z.o,{dense:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Dl.C,{class:"pa-4"},{default:(0,o.w5)((()=>[(0,o.Uk)("등록일")])),_:1}),(0,o.Wm)(qe.D,{cols:"2"},{default:(0,o.w5)((()=>[(0,o.Wm)(V.h,{type:"date",density:"compact",variant:"outlined",min:l.minDate,max:l.maxDate,modelValue:l.boardSearchParam.startDate,"onUpdate:modelValue":t[0]||(t[0]=e=>l.boardSearchParam.startDate=e)},null,8,["min","max","modelValue"])])),_:1}),(0,o.Wm)(Dl.C,{class:"pa-4"},{default:(0,o.w5)((()=>[(0,o.Uk)("~")])),_:1}),(0,o.Wm)(qe.D,{cols:"2"},{default:(0,o.w5)((()=>[(0,o.Wm)(V.h,{type:"date",density:"compact",variant:"outlined",min:l.minDate,max:l.maxDate,modelValue:l.boardSearchParam.endDate,"onUpdate:modelValue":t[1]||(t[1]=e=>l.boardSearchParam.endDate=e)},null,8,["min","max","modelValue"])])),_:1}),(0,o.Wm)(_l.C),(0,o.Wm)(_l.C),(0,o.Wm)(qe.D,{cols:"2"},{default:(0,o.w5)((()=>[(0,o.Wm)(Me.rL,{density:"compact",variant:"outlined",items:a.categories,"item-title":"name","item-value":"id",label:"카테고리 선택",modelValue:l.boardSearchParam.categoryId,"onUpdate:modelValue":t[2]||(t[2]=e=>l.boardSearchParam.categoryId=e)},null,8,["items","modelValue"])])),_:1}),(0,o.Wm)(qe.D,{cols:"3"},{default:(0,o.w5)((()=>[(0,o.Wm)(V.h,{density:"compact",variant:"outlined","single-line":"",modelValue:l.boardSearchParam.searchWord,"onUpdate:modelValue":t[3]||(t[3]=e=>l.boardSearchParam.searchWord=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(qe.D,{cols:"1"},{default:(0,o.w5)((()=>[(0,o.Wm)(f.T,{height:"40px",color:"indigo",onClick:l.search},{default:(0,o.w5)((()=>[(0,o.Uk)("검색")])),_:1},8,["onClick"])])),_:1})])),_:1})}var Tl={name:"SearchBox",props:["categories","criteria"],emits:["searchEvent"],setup(e,{emit:t}){const a="1970-01-01",l=(new Date).toISOString().split("T")[0];let o=(0,N.iH)({startDate:e.criteria.startDate,endDate:e.criteria.endDate,categoryId:e.criteria.categoryId,searchWord:e.criteria.searchWord});const n=()=>{t("searchEvent",o.value)};return{minDate:a,maxDate:l,boardSearchParam:o,search:n}}};const Wl=(0,u.Z)(Tl,[["render",Cl]]);var Il=Wl,xl=a(7977),Pl=a(5689);function Sl(e,t,a,l,n,s){return(0,o.wg)(),(0,o.j4)(xl._C,{class:"text-center"},{default:(0,o.w5)((()=>[l.existPrev?((0,o.wg)(),(0,o.j4)(Pl.D,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(f.T,{icon:"mdi-chevron-left",variant:"text",onClick:l.clickPrev},null,8,["onClick"])])),_:1})):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.pageList,(e=>((0,o.wg)(),(0,o.j4)(Pl.D,{key:e},{default:(0,o.w5)((()=>[(0,o.Wm)(f.T,{active:a.pageInfo.pageNum===e,variant:"text",onClick:t=>l.clickNum(e)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,h.zw)(e),1)])),_:2},1032,["active","onClick"])])),_:2},1024)))),128)),l.existNext?((0,o.wg)(),(0,o.j4)(Pl.D,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(f.T,{icon:"mdi-chevron-right",variant:"text",onClick:l.clickNext},null,8,["onClick"])])),_:1})):(0,o.kq)("",!0)])),_:1})}var Ul={name:"PaginationBar",props:{pageInfo:{type:Object,required:!0,default:()=>({pageNum:1,totalPages:1,totalCounts:0})},displayPageCount:{type:Number,required:!0,default:10}},emits:["handlePage"],setup(e,{emit:t}){const a=e=>{t("handlePage",e)},l=()=>{s.value&&t("handlePage",u.value-e.displayPageCount)},n=()=>{r.value&&t("handlePage",i.value+e.displayPageCount)},s=(0,o.Fl)((()=>u.value-e.displayPageCount>0)),r=(0,o.Fl)((()=>i.value+e.displayPageCount<=e.pageInfo.totalPages)),i=(0,o.Fl)((()=>Math.floor((e.pageInfo.pageNum-1)/e.displayPageCount)*e.displayPageCount+1)),u=(0,o.Fl)((()=>i.value+e.displayPageCount-1)),c=(0,o.Fl)((()=>{let t,a=[];t=u.value>e.pageInfo.totalPages?e.pageInfo.totalPages:u.value;for(let e=i.value;e<=t;e++)a.push(e);return a}));return{pageList:c,existPrev:s,existNext:r,clickNum:a,clickPrev:l,clickNext:n}}};const Fl=(0,u.Z)(Ul,[["render",Sl]]);var Bl=Fl;const ql=e=>((0,o.dD)("data-v-79439620"),e=e(),(0,o.Cn)(),e),Ll=ql((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{class:"text-center font-weight-bold"},"카테고리"),(0,o._)("th",{class:"text-center font-weight-bold",style:{width:"50%"}},"제목"),(0,o._)("th",{class:"text-center font-weight-bold"},"작성자"),(0,o._)("th",{class:"text-center font-weight-bold"},"조회수"),(0,o._)("th",{class:"text-center font-weight-bold"},"등록 일시")])],-1))),Ml={class:"td-title",style:{width:"50%"}},Hl=["onClick","onMouseover"],jl={key:2,class:"ml-2",style:{"font-weight":"bold"}};function zl(e,t,a,l,n,s){return(0,o.wg)(),(0,o.j4)(at.Y,{style:{width:"100%"}},{default:(0,o.w5)((()=>[Ll,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.posts,((e,a)=>((0,o.wg)(),(0,o.iD)("tr",{key:a},[(0,o._)("td",null,(0,h.zw)(e.categoryName),1),(0,o._)("td",Ml,[(0,o._)("a",{style:(0,h.j5)({"text-decoration-line":l.hoverTitle===a?"underline":"",cursor:"pointer"}),onClick:t=>l.clickTitle(e.postId),onMouseover:e=>l.changeHover(a),onMouseleave:t[0]||(t[0]=e=>l.changeHover(null))},(0,h.zw)(l.curtailText(e.title)),45,Hl),e.imaged?((0,o.wg)(),(0,o.j4)(ee.t,{key:0,class:"ml-2",icon:"mdi-image"})):(0,o.kq)("",!0),e.attached?((0,o.wg)(),(0,o.j4)(ee.t,{key:1,class:"ml-2",icon:"mdi-attachment"})):(0,o.kq)("",!0),e.commentCount>0?((0,o.wg)(),(0,o.iD)("a",jl,"["+(0,h.zw)(e.commentCount)+"]",1)):(0,o.kq)("",!0)]),(0,o._)("td",null,(0,h.zw)(e.memberName),1),(0,o._)("td",null,(0,h.zw)(e.hit),1),(0,o._)("td",null,(0,h.zw)(l.DateUtil.dateTimeToString(e.regDate)),1)])))),128))])])),_:1})}var Vl={name:"PostList",props:{posts:{type:Array,required:!0,default:()=>[]}},emits:["clickTitle"],setup(e,{emit:t}){let a=(0,N.iH)(null);const l=e=>gt.curtailTextInBytes(e,90),o=e=>{a.value=e},n=e=>{t("clickTitle",e)};return{hoverTitle:a,curtailText:l,changeHover:o,clickTitle:n,DateUtil:Da}}};const Al=(0,u.Z)(Vl,[["render",zl],["__scopeId","data-v-79439620"]]);var Zl=Al;const $l=e=>((0,o.dD)("data-v-050846b3"),e=e(),(0,o.Cn)(),e),El=$l((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{class:"text-center font-weight-bold"},"카테고리"),(0,o._)("th",{class:"text-center font-weight-bold",style:{width:"40%"}},"제목"),(0,o._)("th",{class:"text-center font-weight-bold"},"작성자"),(0,o._)("th",{class:"text-center font-weight-bold"},"답변 여부"),(0,o._)("th",{class:"text-center font-weight-bold"},"등록 일시"),(0,o._)("th",{class:"text-center font-weight-bold"},"수정 일시")])],-1))),Nl={class:"td-title",style:{width:"40%"}},Ol=["onClick","onMouseover"];function Rl(e,t,a,l,n,s){return(0,o.wg)(),(0,o.j4)(at.Y,{style:{width:"100%"}},{default:(0,o.w5)((()=>[El,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.posts,((e,a)=>((0,o.wg)(),(0,o.iD)("tr",{key:a},[(0,o._)("td",null,(0,h.zw)(e.categoryName),1),(0,o._)("td",Nl,[(0,o._)("a",{style:(0,h.j5)({"text-decoration-line":l.hoverTitle===a?"underline":"",cursor:"pointer"}),onClick:t=>l.clickTitle(e.postId),onMouseover:e=>l.changeHover(a),onMouseleave:t[0]||(t[0]=e=>l.changeHover(null))},(0,h.zw)(l.curtailTitle(e.title)),45,Ol),e.secret?((0,o.wg)(),(0,o.j4)(ee.t,{key:0,class:"ml-2",icon:"mdi-lock"})):(0,o.kq)("",!0)]),(0,o._)("td",null,(0,h.zw)(e.memberName),1),(0,o._)("td",null,[e.childExists?((0,o.wg)(),(0,o.j4)(ee.t,{key:0,icon:"mdi-check-circle",color:"success"})):(0,o.kq)("",!0),e.childExists?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(ee.t,{key:1,icon:"mdi-circle-slice-1"}))]),(0,o._)("td",null,(0,h.zw)(l.DateUtil.dateTimeToString(e.regDate)),1),(0,o._)("td",null,(0,h.zw)(e.modDate?l.DateUtil.dateTimeToString(e.modDate):"-"),1)])))),128))])])),_:1})}var Yl={name:"QnaList",props:{posts:{type:Array,required:!0,default:()=>[]}},emits:["clickTitle"],setup(e,{emit:t}){let a=(0,N.iH)(null);const l=e=>gt.curtailTextInBytes(e,90),o=e=>{a.value=e},n=e=>{t("clickTitle",e)};return{hoverTitle:a,curtailTitle:l,changeHover:o,clickTitle:n,DateUtil:Da}}};const Gl=(0,u.Z)(Yl,[["render",Rl],["__scopeId","data-v-050846b3"]]);var Kl=Gl;const Ql={key:0},Jl={key:1};function Xl(e,t,a,l,n,s){const r=(0,o.up)("GallerySummaryItem"),i=(0,o.up)("GalleryItem");return(0,o.wg)(),(0,o.j4)(z.o,{dense:a.summary},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.posts,((e,t)=>((0,o.wg)(),(0,o.j4)(qe.D,{key:t,class:"fill-height overflow-auto",cols:12/a.columnCount},{default:(0,o.w5)((()=>[a.summary?((0,o.wg)(),(0,o.iD)("div",Ql,[(0,o.Wm)(r,{post:e,onClick:t=>l.clickItem(e.postId)},null,8,["post","onClick"])])):((0,o.wg)(),(0,o.iD)("div",Jl,[(0,o.Wm)(i,{post:e,onClick:t=>l.clickItem(e.postId)},null,8,["post","onClick"])]))])),_:2},1032,["cols"])))),128))])),_:1},8,["dense"])}const eo={class:"text-caption",style:{"font-weight":"bold"}},to={key:0,class:"ml-1"},ao={class:"text-caption",style:{color:"darkgrey"}};function lo(e,t,a,l,n,s){return(0,o.wg)(),(0,o.j4)(M._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Oe.f,{class:"bg-grey-lighten-2",src:a.post.thumbUrl,height:"150",cover:""},null,8,["src"]),(0,o.Wm)(Ra._,null,{default:(0,o.w5)((()=>[(0,o._)("div",eo,[(0,o._)("a",null,(0,h.zw)(l.curtailText(a.post.title)),1),a.post.commentCount>0?((0,o.wg)(),(0,o.iD)("a",to,"["+(0,h.zw)(a.post.commentCount)+"]",1)):(0,o.kq)("",!0)]),(0,o._)("div",ao,[(0,o._)("div",null,(0,h.zw)(a.post.memberName),1),(0,o._)("div",null,(0,h.zw)(a.post.hit)+" / "+(0,h.zw)(l.DateUtil.dateToString(a.post.regDate)),1)])])),_:1})])),_:1})}var oo={name:"GallerySummaryItem",props:{post:{type:Object,required:!0,default:()=>({})}},setup(){const e=e=>gt.curtailTextInBytes(e,26);return{DateUtil:Da,curtailText:e}}};const no=(0,u.Z)(oo,[["render",lo]]);var so=no;const ro={class:"text-subtitle-2",style:{"font-weight":"bold"}},io={key:0,class:"ml-2"},uo={class:"text-caption",style:{color:"darkgrey"}},co={class:"float-left mr-2"},mo={class:"float-left"};function po(e,t,a,l,n,s){return(0,o.wg)(),(0,o.j4)(M._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Oe.f,{class:"bg-grey-lighten-2",src:a.post.thumbUrl,height:"200","aspect-ratio":"1",cover:""},null,8,["src"]),(0,o.Wm)(Ra._,null,{default:(0,o.w5)((()=>[(0,o._)("div",ro,[(0,o._)("a",null,(0,h.zw)(l.curtailText(a.post.title)),1),a.post.commentCount>0?((0,o.wg)(),(0,o.iD)("a",io,"["+(0,h.zw)(a.post.commentCount)+"]",1)):(0,o.kq)("",!0)]),(0,o._)("div",uo,[(0,o._)("div",null,(0,h.zw)(a.post.memberName),1),(0,o._)("div",null,[(0,o._)("div",co,(0,h.zw)(l.DateUtil.dateTimeToString(a.post.regDate)),1),(0,o._)("div",mo,"조회수 "+(0,h.zw)(a.post.hit),1)])])])),_:1})])),_:1})}var go={name:"GalleryItem",props:{post:{type:Object,required:!0,default:()=>({})}},setup(){const e=e=>gt.curtailTextInBytes(e,45);return{DateUtil:Da,curtailText:e}}};const ho=(0,u.Z)(go,[["render",po]]);var fo=ho,vo={name:"GalleryList",components:{GalleryItem:fo,GallerySummaryItem:so},props:{posts:{type:Array,required:!0,default:()=>[]},columnCount:{type:Number,required:!0,default:4},summary:{type:Boolean,required:!1,default:!1}},emits:["clickItem"],setup(e,{emit:t}){const a=e=>{t("clickItem",e)};return{clickItem:a,DateUtil:Da}}};const wo=(0,u.Z)(vo,[["render",Xl]]);var yo=wo,ko=a(6119);function bo(e,t,a,l,n,s){return(0,o.wg)(),(0,o.j4)(ko.fF,{modelValue:l.selected,"onUpdate:modelValue":t[2]||(t[2]=e=>l.selected=e),color:"indigo",mandatory:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f.T,{icon:"mdi-border-all",value:"I",onClick:t[0]||(t[0]=e=>l.clickTypeButton("I"))}),(0,o.Wm)(f.T,{icon:"mdi-view-headline",value:"L",onClick:t[1]||(t[1]=e=>l.clickTypeButton("L"))})])),_:1},8,["modelValue"])}var _o={name:"BoardTypeConverter",props:{currentBoardType:{type:String,default:"L",require:!0}},emits:["convertType"],setup(e,{emit:t}){let a=(0,N.iH)(e.currentBoardType);"I"===e.currentBoardType&&(a.value="I");const l=e=>{t("convertType",e)};return{selected:a,clickTypeButton:l}}};const Do=(0,u.Z)(_o,[["render",bo]]);var Co=Do,To={name:"BoardList",methods:{authorization:Oa},components:{BoardTypeConverter:Co,GalleryList:yo,QnaList:Kl,PostList:Zl,PaginationBar:Bl,SearchBox:Il},setup(){const e=(0,m.yj)(),t=(0,o.f3)("axios");let a=new Ua(e.query);const l=(0,N.iH)({});(0,o.bv)((()=>{a.boardId?t.get(`/boards/${a.boardId}`).then((e=>{l.value=e.data.data,s(),u()})).catch((e=>{console.log(e)})):alert("잘못된 접근 입니다.")}));let n=(0,N.iH)([]);const s=()=>{t.get(`/boards/${a.boardId}/categories`).then((e=>{n.value=e.data.data})).catch((e=>{console.log(e)}))};let r=(0,N.iH)([]),i=(0,N.iH)({});const u=()=>{t.get(`/boards/${a.boardId}/posts`,{params:{...a.getRequestParam(),size:"I"===a.boardType?8:10}}).then((e=>{r.value=e.data.data,i.value=e.data.pageInfo})).catch((e=>{const t=e.response.data;-404===t.code&&t.errors.length>0&&alert(t.errors[0].message)}))},c=e=>{a.setSearchEvent(e),Sn.push({path:"/portal",query:{...a.getQueryParam()}})},d=e=>{Sn.push({path:"/portal",query:{...a.getQueryParam(),page:e}})},p=e=>{Sn.push({path:`/portal/${e}`,query:{...a.getQueryParam()}})},g=e=>{Sn.push({path:`/portal/qna/${e}`,query:{...a.getQueryParam()}})},h=()=>{Sn.push({path:"/portal/write",query:{boardId:a.boardId}})},f=e=>{a.setBoardType(e),Sn.push({path:"/portal",query:{...a.getQueryParam()}})};return{boardInfo:l,categories:n,posts:r,pageInfo:i,criteria:a,moveToPage:d,moveToQnaDetail:g,moveToDetail:p,clickWriteBtn:h,clickSearchBtn:c,convertBoardType:f}}};const Wo=(0,u.Z)(To,[["render",bl],["__scopeId","data-v-773d1a54"]]);var Io=Wo;const xo={class:"container"},Po={key:0,class:"error-message"};function So(e,t,a,l,n,s){return(0,o.wg)(),(0,o.iD)("div",xo,[(0,o.Wm)(M._,{class:"card-area",color:"indigo",variant:"tonal"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ra._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(j.O,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V.h,{label:"아이디",modelValue:l.auth.username,"onUpdate:modelValue":t[0]||(t[0]=e=>l.auth.username=e),variant:"outlined"},null,8,["modelValue"]),(0,o.Wm)(V.h,{label:"비밀번호",type:"password",modelValue:l.auth.password,"onUpdate:modelValue":t[1]||(t[1]=e=>l.auth.password=e),variant:"outlined",autoComplete:"off"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(Kt.Z,null,{default:(0,o.w5)((()=>[l.error.status?((0,o.wg)(),(0,o.iD)("div",Po,(0,h.zw)(l.error.message),1)):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(qt.h,{class:"d-flex"},{default:(0,o.w5)((()=>[(0,o.Wm)(f.T,{class:"flex-grow-1",variant:"flat",height:"60",color:"indigo-darken-4",loading:l.isLoading,onClick:l.clickLoginBtn},{default:(0,o.w5)((()=>[(0,o.Uk)("로그인 ")])),_:1},8,["loading","onClick"])])),_:1})])),_:1})])}var Uo={name:"SignIn",setup(){const e=(0,_.oR)(),t=(0,m.yj)(),a=(0,o.f3)("axios");let l=(0,N.iH)({username:"",password:""}),n=t.query.returnUrl,s=(0,N.iH)({status:!1,message:""});const r=()=>{l.value.username&&l.value.username.trim()?l.value.password&&l.value.password.trim()?i():(s.value.message="비밀번호를 입력해주세요.",s.value.status=!0):(s.value.message="아이디를 입력해주세요.",s.value.status=!0)},i=()=>{d();const e=new FormData;e.set("username",l.value.username),e.set("password",l.value.password),a.post("/signin",e).then((e=>{u(e.data.data),n?Sn.replace(n):Sn.replace("/")})).catch((e=>{l.value.password="",e.response.data&&e.response.data.message?s.value.message=e.response.data.message:s.value.message="로그인을 실패했습니다. 잠시 후 다시 시도해주세요.",s.value.status=!0})).finally((()=>{p()}))},u=t=>{e.dispatch("authStore/login",t)};let c=(0,N.iH)(!1);const d=()=>{c.value=!0},p=()=>{c.value=!1};return{auth:l,error:s,isLoading:c,clickLoginBtn:r,submitForm:i}}};const Fo=(0,u.Z)(Uo,[["render",So],["__scopeId","data-v-425792c6"]]);var Bo=Fo;function qo(e,t,a,l,n,s){const r=(0,o.up)("TwoButtonModal");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(Be.K,{class:"d-flex flex-column align-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(M._,{class:"card-area",width:"100%",color:"indigo",variant:"tonal"},{default:(0,o.w5)((()=>[(0,o.Wm)(H.E,{class:"text-center text-h5 font-weight-bold"},{default:(0,o.w5)((()=>[(0,o.Uk)("회원정보 수정 ")])),_:1}),(0,o.Wm)(Kt.Z,{class:"mb-4"},{default:(0,o.w5)((()=>[(0,o.Wm)(z.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(qe.D,{cols:"1"},{default:(0,o.w5)((()=>[(0,o.Uk)(" 아이디")])),_:1}),(0,o.Wm)(qe.D,{cols:"2"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,h.zw)(l.member.username),1)])),_:1})])),_:1}),(0,o.Wm)(z.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(qe.D,{cols:"1",class:"mt-3"},{default:(0,o.w5)((()=>[(0,o.Uk)("닉네임")])),_:1}),(0,o.Wm)(qe.D,{cols:"5",class:"d-flex align-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(V.h,{modelValue:l.input.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.input.name=e),variant:"outlined",hint:l.pattern.name.hint,density:"compact",spellcheck:"false"},null,8,["modelValue","hint"])])),_:1}),(0,o.Wm)(qe.D,{cols:"2"},{default:(0,o.w5)((()=>[(0,o.Wm)(f.T,{variant:"outlined",height:"40px",disabled:l.input.name===l.member.name,onClick:l.clickModifyNameBtn},{default:(0,o.w5)((()=>[(0,o.Uk)("변경 ")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(qt.h,{class:"btn-area"},{default:(0,o.w5)((()=>[(0,o.Wm)(z.o,{class:"justify-space-between"},{default:(0,o.w5)((()=>[(0,o.Wm)(wt.B,{modelValue:l.passwordDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>l.passwordDialog=e),persistent:"",width:"700",color:"indigo"},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(f.T,(0,o.dG)({color:"indigo-darken-3",variant:"flat","min-width":"150"},e,{onClick:l.openPasswordDialog}),{default:(0,o.w5)((()=>[(0,o.Uk)("비밀번호 변경 ")])),_:2},1040,["onClick"])])),default:(0,o.w5)((()=>[(0,o.Wm)(M._,{class:"card-area"},{default:(0,o.w5)((()=>[(0,o.Wm)(H.E,{class:"text-center text-h5 font-weight-bold"},{default:(0,o.w5)((()=>[(0,o.Uk)("비밀번호 변경 ")])),_:1}),(0,o.Wm)(Ra._,{class:"dialog-item-area"},{default:(0,o.w5)((()=>[(0,o.Wm)(z.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(qe.D,{cols:"3",class:"mt-3"},{default:(0,o.w5)((()=>[(0,o.Uk)("기존 비밀번호")])),_:1}),(0,o.Wm)(qe.D,{cols:"9",class:"d-flex align-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(V.h,{type:"password",modelValue:l.input.currentPassword,"onUpdate:modelValue":t[1]||(t[1]=e=>l.input.currentPassword=e),variant:"outlined",density:"compact"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(z.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(qe.D,{cols:"3",class:"mt-3"},{default:(0,o.w5)((()=>[(0,o.Uk)("새 비밀번호")])),_:1}),(0,o.Wm)(qe.D,{cols:"9",class:"d-flex align-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(V.h,{type:"password",modelValue:l.input.newPassword,"onUpdate:modelValue":t[2]||(t[2]=e=>l.input.newPassword=e),variant:"outlined",hint:l.pattern.newPassword.hint,"persistent-hint":"",density:"compact"},null,8,["modelValue","hint"])])),_:1})])),_:1}),(0,o.Wm)(z.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(qe.D,{cols:"3",class:"mt-3"},{default:(0,o.w5)((()=>[(0,o.Uk)("새 비밀번호 확인")])),_:1}),(0,o.Wm)(qe.D,{cols:"9",class:"d-flex align-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(V.h,{type:"password",modelValue:l.input.newPasswordConfirm,"onUpdate:modelValue":t[3]||(t[3]=e=>l.input.newPasswordConfirm=e),variant:"outlined",density:"compact"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(qt.h,{class:"ma-3"},{default:(0,o.w5)((()=>[(0,o.Wm)(z.o,{class:"justify-space-between"},{default:(0,o.w5)((()=>[(0,o.Wm)(f.T,{color:"indigo-darken-3",variant:"tonal",width:"150",onClick:l.closePasswordDialog},{default:(0,o.w5)((()=>[(0,o.Uk)("취소 ")])),_:1},8,["onClick"]),(0,o.Wm)(f.T,{color:"indigo-darken-3",variant:"flat",width:"150",onClick:l.clickModifyPasswordBtn},{default:(0,o.w5)((()=>[(0,o.Uk)("변경 ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(wt.B,{modelValue:l.withdrawDialog,"onUpdate:modelValue":t[5]||(t[5]=e=>l.withdrawDialog=e),persistent:"",width:"700",color:"indigo"},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(f.T,(0,o.dG)({variant:"tonal","min-width":"150"},e,{onClick:l.openWithdrawDialog}),{default:(0,o.w5)((()=>[(0,o.Uk)("회원 탈퇴 ")])),_:2},1040,["onClick"])])),default:(0,o.w5)((()=>[(0,o.Wm)(r,{question:"정말 탈퇴하시겠습니까?",onSendAnswer:l.closeWithdrawDialog},null,8,["onSendAnswer"])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})])}var Lo={name:"ModifyProfile",components:{TwoButtonModal:zt},setup(){let e=xe.getters["authStore/getMember"];const t=(0,o.f3)("axios");let a=(0,N.iH)({name:e.name,currentPassword:"",newPassword:"",newPasswordConfirm:""});(0,o.YP)((()=>e.name),(e=>{a.value.name=e}));let l=(0,N.iH)(!1),n=()=>{l.value=!0},s=()=>{l.value=!1},r=(0,N.iH)(!1),i=()=>{r.value=!0},u=e=>{r.value=!1,e&&v()};const c={newPassword:{regex:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d~!@#$%^&*()+|=]{8,20}$/,hint:"영문/숫자/특수문자 8-20자리",message:"비밀번호는 영문/숫자/특수문자 8-20자리로 입력해주세요."},name:{regex:/^[0-9a-zA-Zㄱ-ㅎ가-힣]{2,10}$/,hint:"한글/영문/숫자 2-10자리",message:"닉네임은 한글/영문/숫자 2-10자리로 입력해주세요."}},d={name:[e=>!!e||"닉네임을 입력해주세요.",e=>c.name.regex.test(e)||c.name.message],currentPassword:[e=>!!e||"비밀번호를 입력해주세요."],newPassword:[e=>!!e||"새 비밀번호를 입력해주세요.",e=>c.newPassword.regex.test(e)||c.newPassword.message,e=>e!==a.value.currentPassword||"새 비밀번호가 기존 비밀번호와 동일합니다."],newPasswordConfirm:[e=>!!e||"새 비밀번호 확인을 입력해주세요.",e=>e===a.value.newPassword||"새 비밀번호와 동일하게 입력해주세요."]},m=()=>{for(let e of d.name)if(!0!==e(a.value.name))return alert(e(a.value.name)),!1;return!0},p=()=>{for(let e of d.currentPassword)if(!0!==e(a.value.currentPassword))return alert(e(a.value.currentPassword)),!1;for(let e of d.newPassword)if(!0!==e(a.value.newPassword))return alert(e(a.value.newPassword)),!1;for(let e of d.newPasswordConfirm)if(!0!==e(a.value.newPasswordConfirm))return alert(e(a.value.newPasswordConfirm)),!1;return!0},g=()=>{if(!w&&m()){y();const e=new FormData;e.set("name",a.value.name),t.patch("/members",e).then((()=>{alert("닉네임 변경을 완료했습니다."),Sn.go()})).catch((e=>{e.response.data&&e.response.data.message?alert(e.response.data.message):alert("닉네임 변경을 실패했습니다. 잠시 후 다시 시도해주세요.")})).finally((()=>{k()}))}},h=()=>{a.value.currentPassword="",a.value.newPassword="",a.value.newPasswordConfirm=""},f=()=>{if(!w&&p()){y();const e=new FormData;e.set("currentPassword",a.value.currentPassword),e.set("newPassword",a.value.newPassword),t.patch("/members/password",e).then((()=>{alert("비밀번호 변경을 완료했습니다."),s(),h()})).catch((e=>{e.response.data&&e.response.data.message?alert(e.response.data.message):alert("비밀번호 변경을 실패했습니다. 잠시 후 다시 시도해주세요.")})).finally((()=>{k()}))}},v=()=>{w||(y(),t.delete("/members").then((()=>{alert("회원 탈퇴되었습니다.")})).catch((e=>{e.response.data&&e.response.data.message?alert(e.response.data.message):alert("회원 탈퇴를 실패했습니다. 잠시 후 다시 시도해주세요.")})).finally((()=>{k()})))};let w=!1;const y=()=>{w=!0},k=()=>{w=!1};return{member:e,input:a,pattern:c,rules:d,passwordDialog:l,withdrawDialog:r,clickModifyNameBtn:g,clickModifyPasswordBtn:f,openPasswordDialog:n,closePasswordDialog:s,openWithdrawDialog:i,closeWithdrawDialog:u}}};const Mo=(0,u.Z)(Lo,[["render",qo],["__scopeId","data-v-289c6ca2"]]);var Ho=Mo;const jo={key:0},zo={key:1};function Vo(e,t,a,l,n,s){const r=(0,o.up)("TitleHeader"),i=(0,o.up)("GalleryList"),u=(0,o.up)("PostSummaryList");return(0,o.wg)(),(0,o.j4)(z.o,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.list,((e,t)=>((0,o.wg)(),(0,o.j4)(qe.D,{key:t,cols:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"mb-2",title:e.title,style:(0,h.j5)({cursor:e.id?"pointer":""}),onClick:t=>l.moveToList(e.id,e.type)},null,8,["title","style","onClick"]),(0,o.Wm)(yt.J,{class:"border-opacity-100 mb-2",thickness:"4",color:"indigo"}),"I"===e.type?((0,o.wg)(),(0,o.iD)("div",jo,[(0,o.Wm)(i,{posts:e.posts,columnCount:"3",onClickItem:l.moveToDetail,summary:!0},null,8,["posts","onClickItem"])])):((0,o.wg)(),(0,o.iD)("div",zo,[(0,o.Wm)(u,{posts:e.posts,onClickTitle:l.moveToDetail},null,8,["posts","onClickTitle"])]))])),_:2},1024)))),128))])),_:1})}const Ao={class:"d-flex justify-space-between text-caption mt-2"},Zo={class:"text-subtitle-2 mb-2"},$o=["onClick","onMouseover"],Eo={key:2,class:"ml-2",style:{"font-weight":"bold"}};function No(e,t,a,l,n,s){return(0,o.wg)(),(0,o.j4)(at.Y,{density:"compact"},{default:(0,o.w5)((()=>[(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.posts,((e,a)=>((0,o.wg)(),(0,o.iD)("tr",{key:a},[(0,o._)("td",null,[(0,o._)("div",Ao,[(0,o._)("div",null,(0,h.zw)(e.memberName),1),(0,o._)("div",null,(0,h.zw)(e.hit)+" / "+(0,h.zw)(l.DateUtil.dateToString(e.regDate)),1)]),(0,o._)("div",Zo,[(0,o._)("a",{style:(0,h.j5)({"text-decoration-line":l.hoverTitle===a?"underline":"",cursor:"pointer"}),onClick:t=>l.clickTitle(e.postId),onMouseover:e=>l.changeHover(a),onMouseleave:t[0]||(t[0]=e=>l.changeHover(null))},(0,h.zw)(l.curtailText(e.title)),45,$o),e.imaged?((0,o.wg)(),(0,o.j4)(ee.t,{key:0,class:"ml-2",icon:"mdi-image"})):(0,o.kq)("",!0),e.attached?((0,o.wg)(),(0,o.j4)(ee.t,{key:1,class:"ml-2",icon:"mdi-attachment"})):(0,o.kq)("",!0),e.commentCount>0?((0,o.wg)(),(0,o.iD)("a",Eo,"["+(0,h.zw)(e.commentCount)+"]",1)):(0,o.kq)("",!0)])])])))),128))])])),_:1})}var Oo={name:"PostSummaryList",props:{posts:{type:Array,required:!0,default:()=>[]}},emits:["clickTitle"],setup(e,{emit:t}){let a=(0,N.iH)(null);const l=e=>gt.curtailTextInBytes(e,100),o=e=>{a.value=e},n=e=>{t("clickTitle",e)};return{hoverTitle:a,curtailText:l,changeHover:o,clickTitle:n,DateUtil:Da}}};const Ro=(0,u.Z)(Oo,[["render",No]]);var Yo=Ro,Go={name:"MainHome",components:{GalleryList:yo,TitleHeader:$e,PostSummaryList:Yo},setup(){const e=(0,o.f3)("axios");let t=(0,N.iH)([]);(0,o.bv)((()=>{const e=xe.getters["boardInfoStore/getBoardInfos"];let o=[];for(let t of e)t.allowSecret||o.push(l(t));o.push(a()),Promise.all(o).then((()=>{t.value.sort(((e,t)=>e.id-t.id))}))}));const a=()=>e.get("/boards/hit/posts",{params:{startDate:Da.getLastWeek(),endDate:Da.getToday(),page:1,size:8}}).then((e=>{console.log(e.data),t.value.push({id:null,title:"WEEKLY BEST: 조회수",type:"L",posts:e.data.data})})).catch((e=>{console.log(e)})),l=a=>e.get(`/boards/${a.id}/posts`,{params:{page:1,size:"I"===a.boardType?6:8}}).then((e=>{t.value.push({id:a.id,title:a.subject,type:a.boardType,posts:e.data.data})})).catch((e=>{console.log(e)})),n=e=>{Sn.push({path:`/portal/${e}`})},s=(e,t)=>{Sn.push({path:"/portal",query:{boardId:e,boardType:t}})};return{list:t,moveToDetail:n,moveToList:s}}};const Ko=(0,u.Z)(Go,[["render",Vo]]);var Qo=Ko;const Jo={class:"align-center d-flex justify-end mr-2 mb-4"},Xo={class:"text-h5 font-weight-bold"},en={class:"text-subtitle-2 ml-3"},tn={class:"list-area"},an={key:0},ln={key:1},on={class:"text-end"};function nn(e,t,a,l,n,s){const r=(0,o.up)("MyPostList"),i=(0,o.up)("MyCommentList"),u=(0,o.up)("PaginationBar"),c=(0,o.up)("TwoButtonModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(Be.K,{class:"d-flex flex-column align-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(M._,{class:"card-area",width:"100%",color:"indigo",variant:"tonal"},{default:(0,o.w5)((()=>[(0,o.Wm)(Kt.Z,{class:"profile-area text-end"},{default:(0,o.w5)((()=>[(0,o._)("div",Jo,[(0,o._)("div",Xo,(0,h.zw)(l.profile.name),1),(0,o._)("div",en,(0,h.zw)(l.profile.role),1)]),(0,o.Wm)(f.T,{variant:"tonal",onClick:l.moveToModifyProfile},{default:(0,o.w5)((()=>[(0,o.Uk)("회원정보 수정 ")])),_:1},8,["onClick"])])),_:1}),(0,o._)("div",tn,[(0,o.Wm)(ko.fF,{modelValue:l.selected,"onUpdate:modelValue":t[0]||(t[0]=e=>l.selected=e),color:"indigo",mandatory:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f.T,{value:"post",onClick:l.viewMyPosts,variant:"text"},{default:(0,o.w5)((()=>[(0,o.Uk)("작성글")])),_:1},8,["onClick"]),(0,o.Wm)(f.T,{value:"comment",onClick:l.viewMyComments,variant:"text"},{default:(0,o.w5)((()=>[(0,o.Uk)("작성댓글 ")])),_:1},8,["onClick"])])),_:1},8,["modelValue"]),"post"===l.selected?((0,o.wg)(),(0,o.iD)("div",an,[(0,o.Wm)(r,{posts:l.posts,onChangeCheckedList:l.setCheckedList,onClickTitle:l.moveToDetail},null,8,["posts","onChangeCheckedList","onClickTitle"])])):(0,o.kq)("",!0),"comment"===l.selected?((0,o.wg)(),(0,o.iD)("div",ln,[(0,o.Wm)(i,{comments:l.comments,onClickTitle:l.moveToDetail,onChangeCheckedList:l.setCheckedList},null,8,["comments","onClickTitle","onChangeCheckedList"])])):(0,o.kq)("",!0)]),(0,o._)("div",on,[(0,o.Wm)(f.T,{color:"indigo",variant:"flat",onClick:l.clickDeleteBtn},{default:(0,o.w5)((()=>[(0,o.Uk)("삭제 ")])),_:1},8,["onClick"])]),(0,o.Wm)(u,{"page-info":l.pageInfo,displayPageCount:10,onHandlePage:l.moveToPage},null,8,["page-info","onHandlePage"])])),_:1})])),_:1}),(0,o.Wm)(wt.B,{modelValue:l.deleteDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>l.deleteDialog=e),persistent:"",width:"700",color:"indigo"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{question:l.getDeleteQuestion(),onSendAnswer:l.closeDeleteDialog},null,8,["question","onSendAnswer"])])),_:1},8,["modelValue"])],64)}var sn=a(1550);const rn=e=>((0,o.dD)("data-v-14b088f2"),e=e(),(0,o.Cn)(),e),un=rn((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th"),(0,o._)("th",{class:"text-center font-weight-bold",style:{width:"70%"}},"제목"),(0,o._)("th",{class:"text-center font-weight-bold"},"조회수"),(0,o._)("th",{class:"text-center font-weight-bold"},"작성일")])],-1))),cn={class:"td-title",style:{width:"70%"}},dn=["onClick","onMouseover"],mn={key:2,class:"ml-2",style:{"font-weight":"bold"}};function pn(e,t,a,l,n,s){return(0,o.wg)(),(0,o.j4)(at.Y,{style:{width:"100%"}},{default:(0,o.w5)((()=>[un,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.posts,((e,a)=>((0,o.wg)(),(0,o.iD)("tr",{key:a},[(0,o._)("td",null,[(0,o.Wm)(sn.p,{modelValue:l.checkedList,"onUpdate:modelValue":t[0]||(t[0]=e=>l.checkedList=e),value:e.postId,onChange:l.changeCheckedList},null,8,["modelValue","value","onChange"])]),(0,o._)("td",cn,[(0,o._)("a",{style:(0,h.j5)({"text-decoration-line":l.hoverTitle===a?"underline":"",cursor:"pointer"}),onClick:t=>l.clickTitle(e.postId),onMouseover:e=>l.changeHover(a),onMouseleave:t[1]||(t[1]=e=>l.changeHover(null))},(0,h.zw)(l.curtailText(e.title)),45,dn),e.imaged?((0,o.wg)(),(0,o.j4)(ee.t,{key:0,class:"ml-2",icon:"mdi-image"})):(0,o.kq)("",!0),e.attached?((0,o.wg)(),(0,o.j4)(ee.t,{key:1,class:"ml-2",icon:"mdi-attachment"})):(0,o.kq)("",!0),e.commentCount>0?((0,o.wg)(),(0,o.iD)("a",mn,"["+(0,h.zw)(e.commentCount)+"]",1)):(0,o.kq)("",!0)]),(0,o._)("td",null,(0,h.zw)(e.hit),1),(0,o._)("td",null,(0,h.zw)(l.DateUtil.dateToString(e.regDate)),1)])))),128))])])),_:1})}var gn={name:"MyPostList",props:{posts:{type:Array,required:!0,default:()=>[]}},emits:["changeCheckedList","clickTitle"],setup(e,{emit:t}){let a=(0,N.iH)([]);const l=()=>{t("changeCheckedList",a.value)};let o=(0,N.iH)(null);const n=e=>gt.curtailTextInBytes(e,120),s=e=>{o.value=e},r=e=>{t("clickTitle",e)};return{checkedList:a,changeCheckedList:l,curtailText:n,hoverTitle:o,changeHover:s,clickTitle:r,DateUtil:Da}}};const hn=(0,u.Z)(gn,[["render",pn],["__scopeId","data-v-14b088f2"]]);var fn=hn;const vn=e=>((0,o.dD)("data-v-d5d2a06c"),e=e(),(0,o.Cn)(),e),wn=vn((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th"),(0,o._)("th",{class:"text-center font-weight-bold",style:{width:"100%"}},"댓글")])],-1))),yn={class:"list-item pb-2 pt-2"},kn=["onClick","onMouseover"];function bn(e,t,a,l,n,s){return(0,o.wg)(),(0,o.j4)(at.Y,{style:{width:"100%"}},{default:(0,o.w5)((()=>[wn,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.comments,((e,a)=>((0,o.wg)(),(0,o.iD)("tr",{key:a},[(0,o._)("td",null,[(0,o.Wm)(sn.p,{modelValue:l.checkedList,"onUpdate:modelValue":t[0]||(t[0]=e=>l.checkedList=e),value:e.id,onChange:l.changeCheckedList},null,8,["modelValue","value","onChange"])]),(0,o._)("td",yn,[(0,o._)("a",{style:(0,h.j5)({"text-decoration-line":l.hoverTitle===a?"underline":"",cursor:"pointer"}),onClick:t=>l.clickTitle(e.postId),onMouseover:e=>l.changeHover(a),onMouseleave:t[1]||(t[1]=e=>l.changeHover(null))},[(0,o._)("div",null,(0,h.zw)(e.content),1),(0,o._)("div",null,(0,h.zw)(l.DateUtil.dateToString(e.regDate)),1),(0,o._)("div",null,(0,h.zw)(l.curtailText(e.postTitle)),1)],44,kn)])])))),128))])])),_:1})}var _n={name:"MyCommentList",props:{comments:{type:Array,required:!0,default:()=>[]}},emits:["clickTitle","changeCheckedList"],setup(e,{emit:t}){let a=(0,N.iH)([]);const l=()=>{t("changeCheckedList",a.value)};let o=(0,N.iH)(null);const n=e=>gt.curtailTextInBytes(e,150),s=e=>{o.value=e},r=e=>{t("clickTitle",e)};return{checkedList:a,changeCheckedList:l,curtailText:n,hoverTitle:o,changeHover:s,clickTitle:r,DateUtil:Da}}};const Dn=(0,u.Z)(_n,[["render",bn],["__scopeId","data-v-d5d2a06c"]]);var Cn=Dn,Tn={name:"MyPage",components:{MyCommentList:Cn,MyPostList:fn,TwoButtonModal:zt,PaginationBar:Bl},setup(){const e=(0,o.f3)("axios");(0,o.bv)((()=>{r()}));let t=(0,N.iH)("post"),a=(0,N.iH)([]),l=(0,N.iH)([]),n=(0,N.iH)(1),s=(0,N.iH)({});const r=()=>{e.get("/boards/my/posts",{params:{page:n.value,size:20}}).then((e=>{a.value=e.data.data,s.value=e.data.pageInfo}))},i=()=>{e.get("/comments/my",{params:{page:n.value,size:20}}).then((e=>{l.value=e.data.data,s.value=e.data.pageInfo}))},u=(0,o.Fl)((()=>{if(xe.getters["authStore/isAuthenticated"]){const e=xe.getters["authStore/getMember"];return{name:`${e.name}(${e.username})`,role:xe.getters["authStore/isAdmin"]?"관리자 회원":"일반 회원"}}return{}})),c=(0,N.iH)(null),d=()=>{c.value=null};let m=(0,N.iH)(!1);const p=()=>{m.value=!0},g=()=>{m.value=!1},h=t=>e.delete(`/posts/${t}`),f=t=>e.delete(`/comments/${t}`),v=()=>{p();const e=c.value.map(h);Promise.all(e).then((()=>{i()})).finally((()=>{d(),g()}))},w=()=>{p();const e=c.value.map(f);Promise.all(e).then((()=>{i()})).finally((()=>{d(),g()}))},y=()=>{t.value="post",n.value=1,d(),r()},k=()=>{t.value="comment",n.value=1,d(),i()},b=e=>{d(),n.value=e,"post"===t.value?r():"comment"===t.value&&i()},_=e=>{c.value=e},D=e=>{Sn.push(`/portal/${e}`)},C=()=>{Sn.push("/profile/modify")};let T=(0,N.iH)(!1);const W=()=>{switch(t.value){case"post":return"선택한 게시글을 삭제하시겠습니까?";case"comment":return"선택한 댓글을 삭제하시겠습니까?"}return""},I=()=>{m.value||(c.value&&0!==c.value.length?T.value=!0:alert("삭제할 항목을 선택해주세요."))},x=e=>{if(T.value=!1,e)switch(t.value){case"post":v();break;case"comment":w();break}};return{posts:a,comments:l,profile:u,selected:t,pageInfo:s,viewMyPosts:y,viewMyComments:k,moveToPage:b,moveToDetail:D,moveToModifyProfile:C,setCheckedList:_,deleteDialog:T,getDeleteQuestion:W,clickDeleteBtn:I,closeDeleteDialog:x}}};const Wn=(0,u.Z)(Tn,[["render",nn],["__scopeId","data-v-fadd83bc"]]);var In=Wn;const xn=[{path:"/",name:"defaultLayout",component:Ue,beforeEnter:(e,t,a)=>{xe.dispatch("boardInfoStore/fetchBoardInfos").then((()=>{a()})).catch((e=>{console.log(e)}))},children:[{path:"",name:"MainHome",component:Qo},{path:"portal",name:"boardList",component:Io,meta:{permission:"accessList"}},{path:"portal/write",name:"boardWrite",component:vt,meta:{permission:"accessWrite"}},{path:"portal/write/:postId",name:"boardModify",component:vt,props:!0,meta:{permission:"accessWrite"}},{path:"portal/:postId",name:"boardDetail",component:ul,meta:{permission:"accessRead"}}]},{path:"/",name:"noMenuLayout",component:L,children:[{path:"login",name:"login",component:Bo},{path:"signup",name:"signUp",component:Y},{path:"mypage",name:"myPage",component:In},{path:"profile/modify",name:"modifyProfile",component:Ho}]}],Pn=(0,m.p7)({history:(0,m.PO)("/"),routes:xn});Pn.beforeEach(((e,t,a)=>{if("login"===e.name||"signUp"===e.name)return xe.getters["authStore/isAuthenticated"]?a("/"):a();a()})),Pn.beforeEach(((e,t,a)=>{if("myPage"===e.name||"modifyProfile"===e.name)return xe.getters["authStore/isAuthenticated"]?a():a({path:"/login",query:{returnUrl:e.fullPath}});a()})),Pn.beforeEach(((e,t,a)=>{"boardList"===e.name||"boardWrite"===e.name?e.query.boardId&&xe.dispatch("boardInfoStore/fetchBoardInfo",e.query.boardId).then((()=>{let t=xe.getters["boardInfoStore/getBoardInfo"],l=e.meta["permission"];const o=t[l];switch(o){case"ALL":return a();case"NONE":return a("/");default:return xe.getters["authStore/isAuthenticated"]?xe.getters["authStore/getMember"].roles?.find((e=>e===o))?a():(alert("권한이 없습니다."),a("/")):a({path:"/login",query:{returnUrl:e.fullPath}})}})):a()})),Pn.beforeEach(((e,t,a)=>{"boardDetail"===e.name?xe.dispatch("postStore/fetchPost",e.params.postId).then((()=>{let e=xe.getters["postStore/getPost"];if(null==e)return;if(!e.secret)return a();let t=e.member["username"],l=xe.getters["authStore/getMember"].username;return t===l||xe.getters["authStore/isAdmin"]?a():(alert("비밀글은 작성자만 열람 가능합니다."),a(""))})).catch((t=>{switch(t.response.status){case 401:return a({path:"/login",query:{returnUrl:e.fullPath}});case 403:return xe.getters["authStore/isAuthenticated"]?void alert("권한이 없습니다."):a({path:"/login",query:{returnUrl:e.fullPath}});case 404:alert("존재하지 않는 게시글입니다.");break}})):a()})),Pn.beforeEach(((e,t,a)=>{"boardModify"===e.name?xe.dispatch("postStore/fetchPost",e.params.postId).then((()=>{let e=xe.getters["authStore/isAuthenticated"],t=xe.getters["postStore/getPost"].member?.username,l=xe.getters["authStore/getMember"].username;return e&&t===l?a():(alert("권한이 없습니다."),a("/"))})).catch((t=>{switch(t.response.status){case 401:return a({path:"/login",query:{returnUrl:e.fullPath}});case 403:return xe.getters["authStore/isAuthenticated"]?void alert("권한이 없습니다."):a({path:"/login",query:{returnUrl:e.fullPath}});case 404:alert("존재하지 않는 게시글입니다.");break}})):a()}));var Sn=Pn,Un=(a(9773),a(8727)),Fn=(0,Un.Rd)();const Bn=(0,l.ri)({extends:d,beforeCreate(){xe.getters["authStore/getAccessToken"]&&xe.dispatch("authStore/fetchMember").then((e=>e))}}).use(xe).use(Fn).use(Sn);Bn.provide("axios",Ce),Bn.mount("#app")}},t={};function a(l){var o=t[l];if(void 0!==o)return o.exports;var n=t[l]={exports:{}};return e[l].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,l,o,n){if(!l){var s=1/0;for(c=0;c<e.length;c++){l=e[c][0],o=e[c][1],n=e[c][2];for(var r=!0,i=0;i<l.length;i++)(!1&n||s>=n)&&Object.keys(a.O).every((function(e){return a.O[e](l[i])}))?l.splice(i--,1):(r=!1,n<s&&(s=n));if(r){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[l,o,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var o,n,s=l[0],r=l[1],i=l[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(i)var c=i(a)}for(t&&t(l);u<s.length;u++)n=s[u],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},l=self["webpackChunkfront"]=self["webpackChunkfront"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(5388)}));l=a.O(l)})();
//# sourceMappingURL=app.js.map